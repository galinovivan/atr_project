!function(t){t(document).ready(function(){t("#centerSlider").slick({centerPadding:"0px",centerMode:!0,slidesToShow:5,prevArrow:'<div class="arrow left"><i class="social_arrow social_arrow-arrow_left"></i></div>',nextArrow:'<div class="arrow right"><i class="social_arrow social_arrow-arrow_right"></i></div>'})})}(jQuery),function(t){t(document).ready(function(){t("#contactForm").submit(function(e){e.preventDefault();var n=t(this).serialize();n.action;t.ajax({type:"POST",url:window.wp_data.ajax_url,data:n,success:function(){t("#contactModal").modal("show")}})})})}(jQuery),function(t){t(document).ready(function(){var e=document.documentElement.lang;if("ru-RU"==e)var n="Email",o="Пароль",i="Повторите пароль";else if("en-US"==e){var n="Email",o="Password",i="repeat password";t("#pass1").attr("placeholder",o),t("#last_name").attr("placeholder","Name"),t(".auth_form .wpuf-form li input[type=submit]").val("Registration")}var a=t("#wpuf-user_login"),r=t("#wpuf-user_pass"),c=t("#pass2");if(a.attr("placeholder",n),r.attr("placeholder",o),c.attr("placeholder",i),"ru-RU"==e)var l="Загрузить превью в jpg",u="Загрузить работу в pdf";else if("en-US"==e)var l="Download preview in jpg",u="Download the work in pdf";t("#wpuf-___________________pdf-pickfiles").text(u),t("#wpuf-featured_image-pickfiles").text(l)});var e=t(".wpuf_category_select_353_352 select"),n=document.documentElement.lang;if("ru-RU"==n)var o="Категория";else if("en-US"==n)var o="Category";e=e.children(":first"),e.text(o)}(jQuery),function(t){t(document).ready(function(){new e(t("#dateLineContainer")).init()});var e=function(e){this.container=e,this.line=e.find(".date_line"),this.dateStart=Date.parse(e.attr("data-datestart")),this.dateEnd=Date.parse(e.attr("data-dateend")),this.currentDate=Date.now(),this.mobileParentHeight=276,this.mobileLine=t(".date_line_mobile"),this.mobileWidth="767"};e.prototype.init=function(){return this.isMobile()?(this.setMobileHeight(),!0):(this.setWidth(),!0)},e.prototype.getDateDelta=function(){var t=this.dateStart,e=this.dateEnd,n=this.currentDate,o=e-t,i=n-t,a=100*i/o;return console.log(a),a},e.prototype.isMobile=function(){return t(window).width()<this.mobileWidth},e.prototype.setWidth=function(){var t=this.calculateWidth();this.line.css("width",t)},e.prototype.calculateWidth=function(){return this.getDateDelta()+"%"},e.prototype.setMobileHeight=function(){var t=this.calculateMobileHeight();console.log(t),this.mobileLine.css("height",t)},e.prototype.calculateMobileHeight=function(){var t=this.getDateDelta(),e=this.mobileParentHeight;return Math.floor(e*(t/100))+"px"}}(jQuery),function(t){t(document).ready(function(){var e=t(".filter_field"),n=t(".gallery_list");e.click(function(e){e.preventDefault();var o=t(this).attr("data-filter"),i=t(this).attr("data-terms"),a={action:"myfilter",filter_nomination_query:o,terms:i};t.ajax({url:window.wp_data.ajax_url,data:a,type:"POST",beforeSend:function(t){n.find(".sort_preloader").show()},success:function(t){n.find(".sort_preloader").hide(),n.html(t)}})})})}(jQuery),function(t){t(document).ready(function(){var e=t(".helper"),n=e.find(".helper_close");t("#helperToggle").on("click",function(t){e.slideToggle("fast"),t.preventDefault()}),n.on("click",function(t){e.slideToggle("fast"),t.preventDefault()})})}(jQuery),function(t){t(document).ready(function(){function e(e){var o=e.attr("href"),i=t(o),a=n(i);t("body").animate({scrollTop:a},800),t("#mainNav").slideToggle()}function n(t){var e=t.offset().top-325;return console.log(e),e}!function(){var n=t(".scroll_link");n.on("click",function(t){t.preventDefault(),e(n)})}()})}(jQuery),function(t){function e(t,e){return"error"==e?'<div class="alert alert-error"><p class="black">'+t+"</p></div>":'<div class="alert alert-success"><p class="black">'+t+"</p></div>"}var n=!1;t(document).ready(function(){function o(t,e,o){if(n)return e.find("response").html("<p>Необходимо дождаться ответа предыдущего запроса</p>"),!1;e.find('input[type="submit"]').attr("disabled","disabled").val("Подождите"),e.find(".response").html(""),n=!0}function i(o,i,a,r){if(console.log(arguments),o.success){var c=t("#stepSuccess");if(null!=(c=t(c.val())))t("#registrationModal").modal("hide"),c.modal("show");else{var l=e(o.data.message,"success");r.find('input[type="submit"]').prop("disabled",!1).val("Готово")}}else{var l=e(o.data.message,"error");r.find('input[type="submit"]').prop("disabled",!1).val("Отправить")}r.find(".response").html(l),o.data.redirect&&(window.location.href=o.data.redirect),n=!1}var a=t(".userform"),r={dataType:"json",beforeSubmit:o,success:i,error:function(t){console.log(arguments)},url:ajax_var.url};a.ajaxForm(r),t(".logout").click(function(e){if(e.preventDefault(),n)return!1;var o=t(this);t.ajax({type:"POST",url:"admin-ajax.php",dataType:"json",data:"action=logout_me&nonce="+t(this).data("nonce"),beforeSend:function(t){o.text("Подождите"),n=!0},success:function(t){t.success?(o.text("Выходим"),window.location.reload(!0)):alert(t.data.message)},error:function(t,e,n){console.log(arguments)},complete:function(t){n=!1}})})})}(jQuery),function(t){t(document).ready(function(){var e={successSendProject:t("#successSendProject")};t(".wpuf-form-add").submit(function(t){e.successSendProject.modal("show")})})}(jQuery),function(t){function e(t,e){e.on("click",function(){t.slideToggle()}),t.find(".nav_close").on("click",function(e){t.slideToggle(),e.preventDefault()})}t(document).ready(function(){e(t("#mainNav"),t("#navToggle"))})}(jQuery),function(t){function e(){var e=t("#pagePreloader");e.find(".spinner").fadeOut(),e.delay(350).fadeOut("slow")}t(window).on("load",function(){e()})}(jQuery),function(t){t(document).ready(function(){function e(){n.scrollTop()>400?o.show("fast"):o.hide("fast")}var n=t("body"),o=t(".top_link");o.on("click",function(t){t.preventDefault(),n.animate({scrollTop:0},800)}),window.onscroll=function(){e()}})}(jQuery),function(t){t(document).ready(function(){var e=t(".sort_field"),n=t(".gallery_list");e.click(function(e){e.preventDefault();var o=t(this).attr("data-sort"),i=t(this).attr("data-terms"),a={action:"myfilter",sort_type:o,terms:i};t.ajax({url:window.wp_data.ajax_url,data:a,type:"POST",beforeSend:function(t){n.find(".sort_preloader").show()},success:function(t){n.find(".sort_preloader").hide(),n.html(t)}})})})}(jQuery),function(t){t(document).ready(function(){t('[data-toggle="tooltip"]').tooltip()})}(jQuery),function(t){t(document).ready(function(){t("#updateUserInfo").submit(function(e){e.preventDefault();var n=t("#userId").val(),o=t("#userUrl").val(),i=t("#userName").val(),a=t("#formAction").val(),r=t("#currentLang").val(),c={action:a,user_id:n,user_url:o,user_name:i,current_lang:r};t.post(ajax_var,c,function(e){var n=t("#userMessages");n.text(e),n.slideToggle()})})})}(jQuery),function(t){t(document).ready(function(){function e(t){yaCounter44245474.reachGoal(t,function(){console.log("Send event data to "+t)})}t("#topActionForUnloggined").on("click",function(t){e("topHelperHereButton")}),t(".reg_form").find("form").submit(function(){e("registrationForm")}),t("#buttonLearnMore").click(function(){e("buttonLearnMore")}),t("#buttonRegistrationOnButtom").click(function(){e("bottomRegistration")}),t(".wpcf7-form").click(function(){e("bottomContactForm")}),t("#buttonHouse").click(function(){e("buttonHouse")}),t("#ButtonCityOntheWater").click(function(){e("cityOnTheWaterNomination")}),t("#buttonAppartaments").click(function(){e("buttonApartamentsNomination")}),t("#buttonBusStation").click(function(){e("buttonBusStationNomination")})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcm91c2VsLmpzIiwiY29udGFjdC1mb3JtLmpzIiwiY3VzdG9tX2Zvcm0uanMiLCJkYXRlX2xpbmVfY2FsY3VsYXRlLmpzIiwiZmlsdGVyLmpzIiwiaGVscGVyLmpzIiwibGluay1zY3JvbGwuanMiLCJsb2dpbi5qcyIsIm1vZGFscy5qcyIsIm5hdi5qcyIsInByZWxvYWRlci5qcyIsInNjcm9sbC5qcyIsInNvcnQtaGFuZGxlci5qcyIsInRvb2x0aXAuanMiLCJ1cGRhdGVfdXNlci5qcyIsInlhbmRleC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInNsaWNrIiwiY2VudGVyUGFkZGluZyIsImNlbnRlck1vZGUiLCJzbGlkZXNUb1Nob3ciLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJqUXVlcnkiLCJzdWJtaXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJ0aGlzIiwic2VyaWFsaXplIiwiYWpheCIsInR5cGUiLCJ1cmwiLCJ3aW5kb3ciLCJ3cF9kYXRhIiwiYWpheF91cmwiLCJkYXRhIiwic3VjY2VzcyIsIm1vZGFsIiwibGFuZyIsImRvY3VtZW50RWxlbWVudCIsImxvZ2luTGFiZWwiLCJwYXNzTGFiZWwiLCJyZXBlYXRQYXNzTGFiZWwiLCJhdHRyIiwidmFsIiwiJGxvZ2luRmllbGQiLCIkcGFzc3dvcmRGaWVsZCIsIiRyZXBlYXRQYXNzd29yZEZpZWxkIiwidGh1bWJGaWVsZExhYmVsIiwicGRmRmllbGRMYWJlbCIsInRleHQiLCIkY2F0ZWdvcnlMaXN0IiwiY3VycmVudExhbmciLCJjYXRlZ29yeUxhYmVsIiwiY2hpbGRyZW4iLCJEYXRlTGluZSIsImluaXQiLCIkZWxlbWVudENvbnRhaW5lciIsImNvbnRhaW5lciIsImxpbmUiLCJmaW5kIiwiZGF0ZVN0YXJ0IiwiRGF0ZSIsInBhcnNlIiwiZGF0ZUVuZCIsImN1cnJlbnREYXRlIiwibm93IiwibW9iaWxlUGFyZW50SGVpZ2h0IiwibW9iaWxlTGluZSIsIm1vYmlsZVdpZHRoIiwicHJvdG90eXBlIiwiaXNNb2JpbGUiLCJzZXRNb2JpbGVIZWlnaHQiLCJzZXRXaWR0aCIsImdldERhdGVEZWx0YSIsInN0YXJ0IiwiZW5kIiwiY3VycmVudCIsInN0YXJ0RGVsdGEiLCJjdXJyZW50RGVsdGEiLCJkZWx0YSIsImNvbnNvbGUiLCJsb2ciLCJ3aWR0aCIsImNhbGN1bGF0ZVdpZHRoIiwiY3NzIiwiaGVpZ2h0IiwiY2FsY3VsYXRlTW9iaWxlSGVpZ2h0IiwicGFyZW50SGVpZ2h0IiwiTWF0aCIsImZsb29yIiwiZmlsdGVyRmllbGQiLCJnYWxsZXJ5TGlzdCIsImNsaWNrIiwiZmlsdGVyUXVlcnkiLCJ0ZXJtcyIsInJlc3BvbnNlRGF0YSIsImFjdGlvbiIsImZpbHRlcl9ub21pbmF0aW9uX3F1ZXJ5IiwiYmVmb3JlU2VuZCIsInhociIsInNob3ciLCJoaWRlIiwiaHRtbCIsIiRoZWxwZXIiLCIkY2xvc2VUb2dnbGUiLCJvbiIsInNsaWRlVG9nZ2xlIiwibWFrZVNjcm9sbExpbmsiLCIkbGluayIsImhyZWYiLCIkZWxUYXJnZXQiLCJzY3JvbGwiLCJnZXRTY3JvbGwiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiJGVsIiwiJHNjcm9sbCIsIm9mZnNldCIsInRvcCIsIiRzY3JvbGxMaW5rIiwiYnVpbGRNZXNzYWdlIiwibWVzc2FnZSIsImFqYXhHbyIsInJlcUdvIiwiZm9ybSIsIm9wdGlvbnMiLCJyZXFDb21lIiwic3RhdHVzVGV4dCIsImFyZ3VtZW50cyIsIm5leHRTdGVwTW9kYWwiLCJyZXNwb25zZSIsInByb3AiLCJyZWRpcmVjdCIsImxvY2F0aW9uIiwidXNlckZvcm0iLCJhcmdzIiwiZGF0YVR5cGUiLCJiZWZvcmVTdWJtaXQiLCJlcnJvciIsImFqYXhfdmFyIiwiYWpheEZvcm0iLCJsaW5rIiwicmVsb2FkIiwiYWxlcnQiLCJhamF4T3B0aW9ucyIsInRocm93bkVycm9yIiwiY29tcGxldGUiLCJNb2RhbHMiLCJzdWNjZXNzU2VuZFByb2plY3QiLCJpbml0TmF2IiwiJG5hdiIsIiR0b2dnbGVCdG4iLCJpbml0UHJlbG9hZGVyIiwiJHByZWxvYWRlciIsImZhZGVPdXQiLCJkZWxheSIsImluaXRUb3BMaW5rIiwiJGJvZHkiLCIkdG9wTGluayIsIm9uc2Nyb2xsIiwic29ydEZpZWxkIiwic29ydFR5cGUiLCJzb3J0X3R5cGUiLCJ0b29sdGlwIiwidXNlcklkIiwidXNlclVybCIsInVzZXJOYW1lIiwiZm9ybUFjdGlvbiIsInVzZXJfaWQiLCJ1c2VyX3VybCIsInVzZXJfbmFtZSIsImN1cnJlbnRfbGFuZyIsInBvc3QiLCIkdXNlck1lc3NhZ2UiLCJzZW5kRGF0YVRvWWFuZGV4TWV0cmljYSIsImV2ZW50SWQiLCJ5YUNvdW50ZXI0NDI0NTQ3NCIsInJlYWNoR29hbCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsR0FFQUEsRUFBQUMsVUFBQUMsTUFBQSxXQUNBRixFQUFBLGlCQUNBRyxPQUNBQyxjQUFBLE1BQ0FDLFlBQUEsRUFDQUMsYUFBQSxFQUNBQyxVQUFBLHFGQUNBQyxVQUFBLDRGQUlBQyxRQ1ZBLFNBQUFULEdBRUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FFQUYsRUFBQSxnQkFBQVUsT0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxnQkFDQSxJQUFBQyxHQUFBYixFQUFBYyxNQUFBQyxXQUNBRixHQUFBLE1BRUFiLEdBQUFnQixNQUNBQyxLQUFBLE9BQ0FDLElBQUFDLE9BQUFDLFFBQUFDLFNBQ0FDLEtBQUFULEVBQ0FVLFFBQUEsV0FDQXZCLEVBQUEsaUJBQ0F3QixNQUFBLGdCQVFBZixRQ3ZCQSxTQUFBVCxHQUVBQSxFQUFBQyxVQUFBQyxNQUFBLFdBQ0EsR0FBQXVCLEdBQUF4QixTQUFBeUIsZ0JBQUFELElBRUEsSUFBQSxTQUFBQSxFQUNBLEdBQUFFLEdBQUEsUUFDQUMsRUFBQSxTQUNBQyxFQUFBLHVCQUNBLElBQUEsU0FBQUosRUFBQSxDQUNBLEdBQUFFLEdBQUEsUUFDQUMsRUFBQSxXQUNBQyxFQUFBLGlCQUNBN0IsR0FBQSxVQUFBOEIsS0FBQSxjQUFB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MkMsRUFBQW5FLHFCQW1CQXJGLFFDOUNBLFNBQUFULEdBRUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FzREEsUUFBQWdLLEdBQUFDLEdBQ0FDLGtCQUFBQyxVQUFBRixFQUFBLFdBQ0EvRixRQUFBQyxJQUFBLHNCQUFBOEYsS0F0REFuSyxFQUFBLDJCQUNBNkYsR0FBQSxRQUFBLFNBQUFsRixHQUNBdUosRUFBQSx5QkFJQWxLLEVBQUEsYUFBQStDLEtBQUEsUUFDQXJDLE9BQUEsV0FDQXdKLEVBQUEsc0JBR0FsSyxFQUFBLG9CQUNBZ0YsTUFBQSxXQUNBa0YsRUFBQSxxQkFHQWxLLEVBQUEsK0JBQ0FnRixNQUFBLFdBQ0FrRixFQUFBLHdCQUdBbEssRUFBQSxlQUVBZ0YsTUFBQSxXQUNBa0YsRUFBQSx1QkFJQWxLLEVBQUEsZ0JBQ0FnRixNQUFBLFdBQ0FrRixFQUFBLGlCQUdBbEssRUFBQSx5QkFDQWdGLE1BQUEsV0FDQWtGLEVBQUEsOEJBR0FsSyxFQUFBLHVCQUNBZ0YsTUFBQSxXQUNBa0YsRUFBQSxpQ0FHQWxLLEVBQUEscUJBQ0FnRixNQUFBLFdBQ0FrRixFQUFBLG1DQWFBekoiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiggJCApIHtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgIHZhciBzbGlkZXIgPSAkKCcjY2VudGVyU2xpZGVyJyk7XHJcbiAgICAgICAgc2xpZGVyLnNsaWNrKHtcclxuICAgICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMHB4JyxcclxuICAgICAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiA1LFxyXG4gICAgICAgICAgICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwiYXJyb3cgbGVmdFwiPjxpIGNsYXNzPVwic29jaWFsX2Fycm93IHNvY2lhbF9hcnJvdy1hcnJvd19sZWZ0XCI+PC9pPjwvZGl2PicsXHJcbiAgICAgICAgICAgIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJhcnJvdyByaWdodFwiPjxpIGNsYXNzPVwic29jaWFsX2Fycm93IHNvY2lhbF9hcnJvdy1hcnJvd19yaWdodFwiPjwvaT48L2Rpdj4nLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59KShqUXVlcnkpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMDcuMDQuMjAxNy5cbiAqL1xuKGZ1bmN0aW9uKCAkICkge1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJCgnI2NvbnRhY3RGb3JtJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICB2YXIgZm9ybURhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZSgpO1xuICAgICAgICAgICB2YXIgYWN0aW9uID0gZm9ybURhdGFbJ2FjdGlvbiddO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIHVybDogd2luZG93LndwX2RhdGEuYWpheF91cmwsXG4gICAgICAgICAgICAgICAgZGF0YTogZm9ybURhdGEsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkY29udGFjdE1vZGFsID0gJCgnI2NvbnRhY3RNb2RhbCcpO1xuICAgICAgICAgICAgICAgICAgICAkY29udGFjdE1vZGFsLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuXG59KShqUXVlcnkpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IG1hc3RlciBvbiAwNS4wNC4yMDE3LlxuICovXG4oZnVuY3Rpb24oICQgKSB7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICB2YXIgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xuXG4gICAgaWYgKGxhbmcgPT0gJ3J1LVJVJykge1xuICAgICAgICB2YXIgbG9naW5MYWJlbCA9ICdFbWFpbCcsXG4gICAgICAgICAgICBwYXNzTGFiZWwgPSAn0J/QsNGA0L7Qu9GMJyxcbiAgICAgICAgICAgIHJlcGVhdFBhc3NMYWJlbCA9ICfQn9C+0LLRgtC+0YDQuNGC0LUg0L/QsNGA0L7Qu9GMJztcbiAgICB9IGVsc2UgaWYgKGxhbmcgPT0gJ2VuLVVTJykge1xuICAgICAgICB2YXIgbG9naW5MYWJlbCA9ICdFbWFpbCcsXG4gICAgICAgICAgICBwYXNzTGFiZWwgPSAnUGFzc3dvcmQnLFxuICAgICAgICAgICAgcmVwZWF0UGFzc0xhYmVsID0gJ3JlcGVhdCBwYXNzd29yZCc7XG4gICAgICAgICQoJyNwYXNzMScpLmF0dHIoJ3BsYWNlaG9sZGVyJywgcGFzc0xhYmVsKTtcbiAgICAgICAgJCgnI2xhc3RfbmFtZScpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJ05hbWUnKTtcbiAgICAgICAgJCgnLmF1dGhfZm9ybSAud3B1Zi1mb3JtIGxpIGlucHV0W3R5cGU9c3VibWl0XScpLnZhbCgnUmVnaXN0cmF0aW9uJyk7XG4gICAgfVxuXG5cbiAgICAgICB2YXIgJGxvZ2luRmllbGQgPSAkKCcjd3B1Zi11c2VyX2xvZ2luJyksXG4gICAgICAgICAgICRwYXNzd29yZEZpZWxkID0gJCgnI3dwdWYtdXNlcl9wYXNzJyksXG4gICAgICAgICAgICRyZXBlYXRQYXNzd29yZEZpZWxkID0gJCgnI3Bhc3MyJyk7XG5cblxuICAgICAgICAkbG9naW5GaWVsZC5hdHRyKCdwbGFjZWhvbGRlcicsIGxvZ2luTGFiZWwpO1xuICAgICAgICAkcGFzc3dvcmRGaWVsZC5hdHRyKCdwbGFjZWhvbGRlcicsIHBhc3NMYWJlbCk7XG4gICAgICAgICRyZXBlYXRQYXNzd29yZEZpZWxkLmF0dHIoJ3BsYWNlaG9sZGVyJywgcmVwZWF0UGFzc0xhYmVsKTtcblxuICAgICAgICAvLyB2YXIgJHJlZ0Zvcm0gPSAkKCcucmVnX2Zvcm0nKS5maW5kKCdmb3JtJyksXG4gICAgICAgIC8vICAgICAkaW5mb01vZGFsID0gJCgnI2luZm9SZWdpc3RyYXRpb24nKSxcbiAgICAgICAgLy8gICAgICRyZWdpc3RyYXRpb25Nb2RhbCA9ICQoJyNyZWdpc3RyYXRpb25Nb2RhbCcpO1xuICAgICAgICAvL1xuICAgICAgICAvLyAkcmVnRm9ybS5vbignc3VibWl0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICAkcmVnaXN0cmF0aW9uTW9kYWwubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgLy8gICAgICRpbmZvTW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgLy8gfSk7XG5cblxuICAgICAgICBpZiAobGFuZyA9PSAncnUtUlUnKSB7XG5cbiAgICAgICAgICAgIHZhciB0aHVtYkZpZWxkTGFiZWwgPSAn0JfQsNCz0YDRg9C30LjRgtGMINC/0YDQtdCy0YzRjiDQsiBqcGcnO1xuICAgICAgICAgICAgdmFyIHBkZkZpZWxkTGFiZWwgPSAn0JfQsNCz0YDRg9C30LjRgtGMINGA0LDQsdC+0YLRgyDQsiBwZGYnO1xuXG5cbiAgICAgICAgfSBlbHNlIGlmIChsYW5nID09ICdlbi1VUycpIHtcbiAgICAgICAgICAgIHZhciB0aHVtYkZpZWxkTGFiZWwgPSAnRG93bmxvYWQgcHJldmlldyBpbiBqcGcnO1xuICAgICAgICAgICAgdmFyIHBkZkZpZWxkTGFiZWwgPSAnRG93bmxvYWQgdGhlIHdvcmsgaW4gcGRmJztcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdmFyICRwZGZGaWVsZCA9ICQoJyN3cHVmLV9fX19fX19fX19fX19fX19fX19wZGYtcGlja2ZpbGVzJyk7XG5cblxuICAgICAgICAkcGRmRmllbGQudGV4dChwZGZGaWVsZExhYmVsKTtcblxuICAgICAgICB2YXIgJHRodW1iRmllbGQgPSAkKCcjd3B1Zi1mZWF0dXJlZF9pbWFnZS1waWNrZmlsZXMnKTtcblxuXG4gICAgICAgICR0aHVtYkZpZWxkLnRleHQodGh1bWJGaWVsZExhYmVsKTtcbiAgICB9KTtcblxuICAgIHZhciAkY2F0ZWdvcnlMaXN0ID0gJCgnLndwdWZfY2F0ZWdvcnlfc2VsZWN0XzM1M18zNTIgc2VsZWN0Jyk7XG5cbiAgICB2YXIgY3VycmVudExhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcblxuICAgIGlmIChjdXJyZW50TGFuZyA9PSAncnUtUlUnKSB7XG4gICAgICAgIHZhciBjYXRlZ29yeUxhYmVsID0gJ9Ca0LDRgtC10LPQvtGA0LjRjyc7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50TGFuZyA9PSAnZW4tVVMnKSB7XG4gICAgICAgIHZhciBjYXRlZ29yeUxhYmVsID0gJ0NhdGVnb3J5JztcbiAgICB9XG5cbiAgICAkY2F0ZWdvcnlMaXN0ID0gJGNhdGVnb3J5TGlzdC5jaGlsZHJlbignOmZpcnN0Jyk7XG4gICAgJGNhdGVnb3J5TGlzdC50ZXh0KGNhdGVnb3J5TGFiZWwpO1xuXG5cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMTIuMDUuMjAxNy5cbiAqL1xuKGZ1bmN0aW9uKCQpIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cblxuICAgICAgICB2YXIgZGF0ZUxpbmUgPSBuZXcgRGF0ZUxpbmUoJCgnI2RhdGVMaW5lQ29udGFpbmVyJykpO1xuICAgICAgICBkYXRlTGluZS5pbml0KCk7XG5cblxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pxdWVyeX0gJGVsZW1lbnRDb250YWluZXJcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgdmFyIERhdGVMaW5lID0gZnVuY3Rpb24oJGVsZW1lbnRDb250YWluZXIpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyID0gJGVsZW1lbnRDb250YWluZXI7XG4gICAgICB0aGlzLmxpbmUgPSAkZWxlbWVudENvbnRhaW5lci5maW5kKCcuZGF0ZV9saW5lJyk7XG4gICAgICB0aGlzLmRhdGVTdGFydCA9ICBEYXRlLnBhcnNlKCRlbGVtZW50Q29udGFpbmVyLmF0dHIoJ2RhdGEtZGF0ZXN0YXJ0JykpO1xuICAgICAgdGhpcy5kYXRlRW5kID0gRGF0ZS5wYXJzZSgkZWxlbWVudENvbnRhaW5lci5hdHRyKCdkYXRhLWRhdGVlbmQnKSk7XG4gICAgICB0aGlzLmN1cnJlbnREYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMubW9iaWxlUGFyZW50SGVpZ2h0ID0gMjc2O1xuICAgICAgdGhpcy5tb2JpbGVMaW5lID0gJCgnLmRhdGVfbGluZV9tb2JpbGUnKTtcbiAgICAgIHRoaXMubW9iaWxlV2lkdGggPSAnNzY3JztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgRGF0ZUxpbmUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0TW9iaWxlSGVpZ2h0KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIERhdGVMaW5lLnByb3RvdHlwZS5nZXREYXRlRGVsdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5kYXRlU3RhcnQ7XG4gICAgICAgIHZhciBlbmQgPSB0aGlzLmRhdGVFbmQ7XG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5jdXJyZW50RGF0ZTtcbiAgICAgICAgdmFyIHN0YXJ0RGVsdGEgPSBlbmQgLSBzdGFydDtcbiAgICAgICAgdmFyIGN1cnJlbnREZWx0YSA9IGN1cnJlbnQgLSBzdGFydDtcbiAgICAgICAgdmFyIGRlbHRhID0gKGN1cnJlbnREZWx0YSAqIDEwMCkgLyBzdGFydERlbHRhO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGRlbHRhKTtcblxuICAgICAgICByZXR1cm4gZGVsdGE7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgRGF0ZUxpbmUucHJvdG90eXBlLmlzTW9iaWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkKHdpbmRvdykud2lkdGgoKSA8IHRoaXMubW9iaWxlV2lkdGg7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRGF0ZUxpbmUucHJvdG90eXBlLnNldFdpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgdmFyIHdpZHRoID0gdGhpcy5jYWxjdWxhdGVXaWR0aCgpO1xuXG4gICAgICAgIHRoaXMubGluZS5jc3MoJ3dpZHRoJywgd2lkdGgpO1xuICAgIH07XG5cbiAgICBEYXRlTGluZS5wcm90b3R5cGUuY2FsY3VsYXRlV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRlbHRhID0gdGhpcy5nZXREYXRlRGVsdGEoKTtcbiAgICAgICByZXR1cm4gZGVsdGEgKyAnJSc7XG4gICAgfTtcblxuXG4gICAgRGF0ZUxpbmUucHJvdG90eXBlLnNldE1vYmlsZUhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVNb2JpbGVIZWlnaHQoKTtcbiAgICAgICAgY29uc29sZS5sb2coaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5tb2JpbGVMaW5lLmNzcygnaGVpZ2h0JywgaGVpZ2h0KTtcbiAgICB9O1xuXG4gICAgRGF0ZUxpbmUucHJvdG90eXBlLmNhbGN1bGF0ZU1vYmlsZUhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGVsdGEgPSB0aGlzLmdldERhdGVEZWx0YSgpO1xuICAgICAgICB2YXIgcGFyZW50SGVpZ2h0ID0gdGhpcy5tb2JpbGVQYXJlbnRIZWlnaHQ7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLmZsb29yKHBhcmVudEhlaWdodCAqIChkZWx0YSAvIDEwMCkpO1xuXG4gICAgICAgIHJldHVybiBoZWlnaHQgKyAncHgnO1xuICAgIH07XG5cblxuXG59KShqUXVlcnkpOyIsIi8qKlxuICogQ3JlYXRlZCBieSByb290IG9uIDI5LjA1LjE3LlxuICovXG5cbihmdW5jdGlvbigkKSB7XG5cblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBmaWx0ZXJGaWVsZCA9ICQoJy5maWx0ZXJfZmllbGQnKTtcbiAgICAgICAgdmFyIGdhbGxlcnlMaXN0ID0gJCgnLmdhbGxlcnlfbGlzdCcpO1xuICAgICAgICBmaWx0ZXJGaWVsZC5jbGljayhmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJRdWVyeSA9ICQodGhpcykuYXR0cignZGF0YS1maWx0ZXInKTtcbiAgICAgICAgICAgIHZhciB0ZXJtcyA9ICQodGhpcykuYXR0cignZGF0YS10ZXJtcycpO1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAnYWN0aW9uJzogJ215ZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAnZmlsdGVyX25vbWluYXRpb25fcXVlcnknOiBmaWx0ZXJRdWVyeSxcbiAgICAgICAgICAgICAgICAndGVybXMnOiB0ZXJtc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB3aW5kb3cud3BfZGF0YS5hamF4X3VybCxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeUxpc3QuZmluZCgnLnNvcnRfcHJlbG9hZGVyJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeUxpc3QuZmluZCgnLnNvcnRfcHJlbG9hZGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5TGlzdC5odG1sKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSk7XG5cbiAgICB9KVxuXG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDI0LjAzLjIwMTcuXG4gKi9cbihmdW5jdGlvbiggJCApIHtcblxuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciAkaGVscGVyID0gJCgnLmhlbHBlcicpO1xuICAgICAgdmFyICRjbG9zZVRvZ2dsZSA9ICRoZWxwZXIuZmluZCgnLmhlbHBlcl9jbG9zZScpO1xuICAgICAgdmFyICRoZWxwZXJUb2dnbGUgPSAkKCcjaGVscGVyVG9nZ2xlJyk7XG5cbiAgICAgICRoZWxwZXJUb2dnbGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICRoZWxwZXIuc2xpZGVUb2dnbGUoJ2Zhc3QnKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB9KTtcblxuICAgICAgICAkY2xvc2VUb2dnbGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgJGhlbHBlci5zbGlkZVRvZ2dsZSgnZmFzdCcpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDA3LjA0LjIwMTcuXG4gKi9cblxuKGZ1bmN0aW9uKCAkICkge1xuICAgIFxuICAgIFxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgIGluaXRTY3JvbGxMaW5rKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbml0U2Nyb2xsTGluaygpIHtcbiAgICAgICAgICAgIHZhciAkc2Nyb2xsTGluayA9ICQoJy5zY3JvbGxfbGluaycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkc2Nyb2xsTGluay5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtYWtlU2Nyb2xsTGluaygkc2Nyb2xsTGluayk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRsaW5rXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBtYWtlU2Nyb2xsTGluaygkbGluaykge1xuICAgICAgICAgICAgdmFyIGhyZWYgPSAkbGluay5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICB2YXIgJGVsVGFyZ2V0ID0gJChocmVmKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGwgPSBnZXRTY3JvbGwoJGVsVGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTtcbiAgICAgICAgICAgICRib2R5LmFuaW1hdGUoe3Njcm9sbFRvcDogc2Nyb2xsfSwgODAwKTtcbiAgICAgICAgICAgICQoJyNtYWluTmF2Jykuc2xpZGVUb2dnbGUoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVsXG4gICAgICAgICAqIEByZXR1cm5zIHtJbnRlZ2VyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2Nyb2xsKCRlbCkge1xuICAgICAgICAgICAgXG4gICAgICAgIHZhciAkc2Nyb2xsID0gJGVsLm9mZnNldCgpLnRvcCAtIDMyNTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2Nyb2xsKTtcbiAgICAgICAgICAgIHJldHVybiAkc2Nyb2xsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH0pO1xuICAgIFxuICAgIFxuICAgIFxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMjguMDMuMjAxNy5cbiAqL1xuKGZ1bmN0aW9uKCAkICkge1xuXG4gICAgdmFyIGFqYXhHbyA9IGZhbHNlO1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIHVzZXJGb3JtID0gJCgnLnVzZXJmb3JtJyk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVxR28oZGF0YSwgZm9ybSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGFqYXhHbykge1xuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgncmVzcG9uc2UnKS5odG1sKCc8cD7QndC10L7QsdGF0L7QtNC40LzQviDQtNC+0LbQtNCw0YLRjNGB0Y8g0L7RgtCy0LXRgtCwINC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0LfQsNC/0YDQvtGB0LA8L3A+Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKS52YWwoJ9Cf0L7QtNC+0LbQtNC40YLQtScpO1xuICAgICAgICAgICAgZm9ybS5maW5kKCcucmVzcG9uc2UnKS5odG1sKCcnKTtcbiAgICAgICAgICAgIGFqYXhHbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmVxQ29tZShkYXRhLCBzdGF0dXNUZXh0LCB4aHIsIGZvcm0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV4dFN0ZXBNb2RhbCA9ICQoJyNzdGVwU3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwTW9kYWwgPSAkKG5leHRTdGVwTW9kYWwudmFsKCkpO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dFN0ZXBNb2RhbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNyZWdpc3RyYXRpb25Nb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIG5leHRTdGVwTW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBidWlsZE1lc3NhZ2UoZGF0YS5kYXRhLm1lc3NhZ2UsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnZhbCgn0JPQvtGC0L7QstC+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBidWlsZE1lc3NhZ2UoZGF0YS5kYXRhLm1lc3NhZ2UsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnZhbCgn0J7RgtC/0YDQsNCy0LjRgtGMJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JtLmZpbmQoJy5yZXNwb25zZScpLmh0bWwocmVzcG9uc2UpO1xuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZWRpcmVjdCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YS5kYXRhLnJlZGlyZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWpheEdvID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBiZWZvcmVTdWJtaXQ6IHJlcUdvLFxuICAgICAgICAgICAgc3VjY2VzczogcmVxQ29tZSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cmw6IGFqYXhfdmFyLnVybFxuICAgICAgICB9O1xuICAgICAgICB1c2VyRm9ybS5hamF4Rm9ybShhcmdzKTtcblxuICAgICAgICAkKCcubG9nb3V0JykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChhamF4R28pIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHZhciBsaW5rID0gJCh0aGlzKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogJ2FkbWluLWFqYXgucGhwJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGRhdGE6ICdhY3Rpb249bG9nb3V0X21lJm5vbmNlPScgKyAkKHRoaXMpLmRhdGEoJ25vbmNlJyksXG4gICAgICAgICAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5rLnRleHQoJ9Cf0L7QtNC+0LbQtNC40YLQtScpO1xuICAgICAgICAgICAgICAgICAgICBhamF4R28gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnRleHQoJ9CS0YvRhdC+0LTQuNC8Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoZGF0YS5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGFqYXhHbyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSk7XG5cblxuXG4gICAgfSk7XG5cblxuICAgIGZ1bmN0aW9uIGJ1aWxkTWVzc2FnZShtZXNzYWdlLCB0eXBlKSB7XG4gICAgICAgIGlmICh0eXBlID09ICdlcnJvcicpIHtcblxuICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+PHAgY2xhc3M9XCJibGFja1wiPicgKyBtZXNzYWdlICsgJzwvcD48L2Rpdj4nO1xuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPjxwIGNsYXNzPVwiYmxhY2tcIj4nICsgbWVzc2FnZSArICc8L3A+PC9kaXY+JztcbiAgICB9XG5cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMjkuMDMuMjAxNy5cbiAqL1xuKGZ1bmN0aW9uKCAkICkge1xuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBNb2RhbHMgPSB7XG4gICAgICAgICAgICAnc3VjY2Vzc1NlbmRQcm9qZWN0JzogJCgnI3N1Y2Nlc3NTZW5kUHJvamVjdCcpXG4gICAgICAgIH07XG5cblxuICAgICAgIHZhciAkY3JlYXRlUHJvamVjdEZvcm0gPSAkKCcud3B1Zi1mb3JtLWFkZCcpO1xuXG4gICAgICAgICRjcmVhdGVQcm9qZWN0Rm9ybS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIE1vZGFscy5zdWNjZXNzU2VuZFByb2plY3QubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMjQuMDMuMjAxNy5cbiAqL1xuXG5cbihmdW5jdGlvbiggJCApIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgaW5pdE5hdigkKCcjbWFpbk5hdicpLCAkKCcjbmF2VG9nZ2xlJykpO1xuXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gJG5hdlxuICAgICAqIEBwYXJhbSAkdG9nZ2xlQnRuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdE5hdigkbmF2LCAkdG9nZ2xlQnRuKSB7XG5cbiAgICAgICR0b2dnbGVCdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAkbmF2LnNsaWRlVG9nZ2xlKCk7XG5cbiAgICAgIH0pO1xuXG4gICAgICAgIHZhciAkY2xvc2VCdG4gPSAkbmF2LmZpbmQoJy5uYXZfY2xvc2UnKTtcblxuICAgICAgICRjbG9zZUJ0bi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICRuYXYuc2xpZGVUb2dnbGUoKTtcbiAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICRuYXZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzbGlkZU5hdigkbmF2KSB7XG4gICAgICAgICRuYXYuc2xpZGVUb2dnbGUoKTtcbiAgICB9XG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDA0LjA0LjIwMTcuXG4gKi9cbihmdW5jdGlvbiggJCApIHtcblxuXG4gICAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGluaXRQcmVsb2FkZXIoKTtcbiAgICB9KTtcblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdFByZWxvYWRlcigpIHtcbiAgICAgICAgdmFyICRwcmVsb2FkZXIgPSAkKCcjcGFnZVByZWxvYWRlcicpLFxuICAgICAgICAgICAgJHNwaW5uZXIgPSAkcHJlbG9hZGVyLmZpbmQoJy5zcGlubmVyJyk7XG5cbiAgICAgICAgJHNwaW5uZXIuZmFkZU91dCgpO1xuICAgICAgICAkcHJlbG9hZGVyLmRlbGF5KDM1MCkuZmFkZU91dCgnc2xvdycpO1xuICAgIH1cblxufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbiggJCApIHtcblxuICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgdmFyICRib2R5ID0gJCgnYm9keScpO1xuICAgICAgIHZhciAkdG9wTGluayA9ICQoJy50b3BfbGluaycpO1xuXG4gICAgICAgJHRvcExpbmsub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAkYm9keS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCA4MDApO1xuXG4gICAgICAgfSk7XG5cblxuICAgICAgIHdpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBpbml0VG9wTGluaygpO1xuICAgICAgIH07XG5cblxuICAgICAgIC8qKlxuICAgICAgICAqIFxuICAgICAgICAqL1xuICAgICAgIGZ1bmN0aW9uIGluaXRUb3BMaW5rKCkge1xuICAgICAgICAgICBpZiAoJGJvZHkuc2Nyb2xsVG9wKCkgPiA0MDApIHtcbiAgICAgICAgICAgICAgICR0b3BMaW5rLnNob3coJ2Zhc3QnKTtcbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICR0b3BMaW5rLmhpZGUoJ2Zhc3QnKTtcbiAgICAgICAgICAgfVxuICAgICAgIH1cblxuXG4gICB9KTtcblxuXG5cbn0pKGpRdWVyeSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHJvb3Qgb24gMjkuMDUuMTcuXG4gKi9cblxuKGZ1bmN0aW9uKCQpIHtcblxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgICAgdmFyIHNvcnRGaWVsZCA9ICQoJy5zb3J0X2ZpZWxkJyk7XG4gICAgICB2YXIgZ2FsbGVyeUxpc3QgPSAkKCcuZ2FsbGVyeV9saXN0Jyk7XG4gICAgICBzb3J0RmllbGQuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHZhciBzb3J0VHlwZSA9ICQodGhpcykuYXR0cignZGF0YS1zb3J0Jyk7XG4gICAgICAgICAgdmFyIHRlcm1zID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRlcm1zJyk7XG4gICAgICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgICAgICAgJ2FjdGlvbic6ICdteWZpbHRlcicsXG4gICAgICAgICAgICAgICdzb3J0X3R5cGUnOiBzb3J0VHlwZSxcbiAgICAgICAgICAgICAgJ3Rlcm1zJzogdGVybXNcbiAgICAgICAgICB9O1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHVybDogd2luZG93LndwX2RhdGEuYWpheF91cmwsXG4gICAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgICBnYWxsZXJ5TGlzdC5maW5kKCcuc29ydF9wcmVsb2FkZXInKS5zaG93KCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBnYWxsZXJ5TGlzdC5maW5kKCcuc29ydF9wcmVsb2FkZXInKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICBnYWxsZXJ5TGlzdC5odG1sKGRhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSlcblxuICAgICAgfSk7XG5cbiAgfSlcblxuXG59KShqUXVlcnkpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IG1hc3RlciBvbiAzMC4wMy4yMDE3LlxuICovXG5cbihmdW5jdGlvbiggJCApIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpO1xuICAgIH0pO1xuXG59KShqUXVlcnkpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IG1hc3RlciBvbiAxNi4wNS4yMDE3LlxuICovXG4oZnVuY3Rpb24oICQgKSB7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgJGZvcm0gPSAkKCcjdXBkYXRlVXNlckluZm8nKTtcblxuICAgICAgICAkZm9ybS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciB1c2VySWQgPSAkKCcjdXNlcklkJykudmFsKCk7XG4gICAgICAgICAgICB2YXIgdXNlclVybCA9ICQoJyN1c2VyVXJsJykudmFsKCk7XG4gICAgICAgICAgICB2YXIgdXNlck5hbWUgPSAkKCcjdXNlck5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBmb3JtQWN0aW9uID0gJCgnI2Zvcm1BY3Rpb24nKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50TGFuZyA9ICQoJyNjdXJyZW50TGFuZycpLnZhbCgpO1xuXG4gICAgICAgICAgICB2YXIgZm9ybURhdGEgPSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmb3JtQWN0aW9uLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgICAgICB1c2VyX3VybDogdXNlclVybCxcbiAgICAgICAgICAgICAgICB1c2VyX25hbWU6IHVzZXJOYW1lLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRfbGFuZzogY3VycmVudExhbmdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICQucG9zdChhamF4X3ZhciwgZm9ybURhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyICR1c2VyTWVzc2FnZSA9ICQoJyN1c2VyTWVzc2FnZXMnKTtcblxuICAgICAgICAgICAgICAgICR1c2VyTWVzc2FnZS50ZXh0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkdXNlck1lc3NhZ2Uuc2xpZGVUb2dnbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuXG5cblxuXG5cblxuXG5cbiAgICB9KTtcblxuXG5cblxuXG5cblxufSkoalF1ZXJ5KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgcm9vdCBvbiAwMS4wNi4xNy5cbiAqL1xuKGZ1bmN0aW9uKCQpIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciB0b3BIZWxwZXJCdXR0b24gPSAkKCcjdG9wQWN0aW9uRm9yVW5sb2dnaW5lZCcpO1xuICAgICAgICB0b3BIZWxwZXJCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBzZW5kRGF0YVRvWWFuZGV4TWV0cmljYSgndG9wSGVscGVySGVyZUJ1dHRvbicpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25Gb3JtID0gJCgnLnJlZ19mb3JtJykuZmluZCgnZm9ybScpO1xuICAgICAgICByZWdpc3RyYXRpb25Gb3JtLnN1Ym1pdChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbmREYXRhVG9ZYW5kZXhNZXRyaWNhKCdyZWdpc3RyYXRpb25Gb3JtJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBidXR0b25MZWFybk1vcmUgPSAkKCcjYnV0dG9uTGVhcm5Nb3JlJyk7XG4gICAgICAgIGJ1dHRvbkxlYXJuTW9yZS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgc2VuZERhdGFUb1lhbmRleE1ldHJpY2EoJ2J1dHRvbkxlYXJuTW9yZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgYnV0dG9tUmVnaXN0cmF0aW9uQnV0dG9uID0gJCgnI2J1dHRvblJlZ2lzdHJhdGlvbk9uQnV0dG9tJyk7XG4gICAgICAgIGJ1dHRvbVJlZ2lzdHJhdGlvbkJ1dHRvbi5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgc2VuZERhdGFUb1lhbmRleE1ldHJpY2EoJ2JvdHRvbVJlZ2lzdHJhdGlvbicpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgYm90dG9tQ29udGFjdEZvcm0gPSAkKCcud3BjZjctZm9ybScpO1xuXG4gICAgICAgIGJvdHRvbUNvbnRhY3RGb3JtLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBzZW5kRGF0YVRvWWFuZGV4TWV0cmljYSgnYm90dG9tQ29udGFjdEZvcm0nKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICB2YXIgaG91c2VOb21pbmF0aW9uQnV0dG9uID0gJCgnI2J1dHRvbkhvdXNlJyk7XG4gICAgICAgIGhvdXNlTm9taW5hdGlvbkJ1dHRvbi5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgc2VuZERhdGFUb1lhbmRleE1ldHJpY2EoJ2J1dHRvbkhvdXNlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjaXR5T25UaGVXYXRlck5vbWluYXRpb24gPSAkKCcjQnV0dG9uQ2l0eU9udGhlV2F0ZXInKTtcbiAgICAgICAgY2l0eU9uVGhlV2F0ZXJOb21pbmF0aW9uLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBzZW5kRGF0YVRvWWFuZGV4TWV0cmljYSgnY2l0eU9uVGhlV2F0ZXJOb21pbmF0aW9uJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBhcHBhcnRhbWVudHNOb21pbmF0aW9uID0gJCgnI2J1dHRvbkFwcGFydGFtZW50cycpO1xuICAgICAgICBhcHBhcnRhbWVudHNOb21pbmF0aW9uLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBzZW5kRGF0YVRvWWFuZGV4TWV0cmljYSgnYnV0dG9uQXBhcnRhbWVudHNOb21pbmF0aW9uJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBidXR0b25CdXNTdGF0aW9uID0gJCgnI2J1dHRvbkJ1c1N0YXRpb24nKTtcbiAgICAgICAgYnV0dG9uQnVzU3RhdGlvbi5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgc2VuZERhdGFUb1lhbmRleE1ldHJpY2EoJ2J1dHRvbkJ1c1N0YXRpb25Ob21pbmF0aW9uJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgICogQHBhcmFtIGV2ZW50SWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNlbmREYXRhVG9ZYW5kZXhNZXRyaWNhKGV2ZW50SWQpIHtcbiAgICAgICAgICAgICB5YUNvdW50ZXI0NDI0NTQ3NC5yZWFjaEdvYWwoZXZlbnRJZCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlbmQgZXZlbnQgZGF0YSB0byAnICsgZXZlbnRJZCk7XG4gICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iXX0=
