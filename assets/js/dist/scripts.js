!function(t){t(document).ready(function(){t("#centerSlider").slick({centerPadding:"0px",centerMode:!0,slidesToShow:5,prevArrow:'<div class="arrow left"><i class="social_arrow social_arrow-arrow_left"></i></div>',nextArrow:'<div class="arrow right"><i class="social_arrow social_arrow-arrow_right"></i></div>'})})}(jQuery),function(t){t(document).ready(function(){t("#contactForm").submit(function(e){e.preventDefault();var n=t(this).serialize();n.action;t.ajax({type:"POST",url:window.wp_data.ajax_url,data:n,success:function(){t("#contactModal").modal("show")}})})})}(jQuery),function(t){t(document).ready(function(){var e=t("#wpuf-user_login"),n=t("#wpuf-user_pass"),o=t("#pass2");e.attr("placeholder","Email"),n.attr("placeholder","Пароль"),o.attr("placeholder","Повторите пароль");t("#wpuf-___________________pdf-pickfiles").text("Загрузить работу в pdf");t("#wpuf-featured_image-pickfiles").text("Загрузить превью в jpg")});var e=t(".wpuf_category_select_353_352 select");e=e.children(":first"),e.text("Категория")}(jQuery),function(t){t(document).ready(function(){new e(t("#dateLineContainer")).init()});var e=function(e){this.container=e,this.line=e.find(".date_line"),this.dateStart=Date.parse(e.attr("data-datestart")),this.dateEnd=Date.parse(e.attr("data-dateend")),this.currentDate=Date.now(),this.mobileParentHeight=276,this.mobileLine=t(".date_line_mobile"),this.mobileWidth="767"};e.prototype.init=function(){return this.isMobile()?(this.setMobileHeight(),!0):(this.setWidth(),!0)},e.prototype.getDateDelta=function(){var t=this.dateStart,e=this.dateEnd,n=this.currentDate,o=e-t,i=n-t,a=100*i/o;return console.log(a),a},e.prototype.isMobile=function(){return t(window).width()<this.mobileWidth},e.prototype.setWidth=function(){var t=this.calculateWidth();this.line.css("width",t)},e.prototype.calculateWidth=function(){return this.getDateDelta()+"%"},e.prototype.setMobileHeight=function(){var t=this.calculateMobileHeight();console.log(t),this.mobileLine.css("height",t)},e.prototype.calculateMobileHeight=function(){var t=this.getDateDelta(),e=this.mobileParentHeight;return Math.floor(e*(t/100))+"px"}}(jQuery),function(t){t(document).ready(function(){var e=t(".helper"),n=e.find(".helper_close");t("#helperToggle").on("click",function(t){e.slideToggle("fast"),t.preventDefault()}),n.on("click",function(t){e.slideToggle("fast"),t.preventDefault()})})}(jQuery),function(t){t(document).ready(function(){function e(e){var o=e.attr("href"),i=t(o),a=n(i);t("body").animate({scrollTop:a},800),t("#mainNav").slideToggle()}function n(t){var e=t.offset().top-325;return console.log(e),e}!function(){var n=t(".scroll_link");n.on("click",function(t){t.preventDefault(),e(n)})}()})}(jQuery),function(t){function e(t,e){return"error"==e?'<div class="alert alert-error"><p class="black">'+t+"</p></div>":'<div class="alert alert-success"><p class="black">'+t+"</p></div>"}var n=!1;t(document).ready(function(){function o(t,e,o){if(n)return e.find("response").html("<p>Необходимо дождаться ответа предыдущего запроса</p>"),!1;e.find('input[type="submit"]').attr("disabled","disabled").val("Подождите"),e.find(".response").html(""),n=!0}function i(o,i,a,r){if(console.log(arguments),o.success){var s=t("#stepSuccess");if(null!=(s=t(s.val())))t("#registrationModal").modal("hide"),s.modal("show");else{var l=e(o.data.message,"success");r.find('input[type="submit"]').prop("disabled",!1).val("Готово")}}else{var l=e(o.data.message,"error");r.find('input[type="submit"]').prop("disabled",!1).val("Отправить")}r.find(".response").html(l),o.data.redirect&&(window.location.href=o.data.redirect),n=!1}var a=t(".userform"),r={dataType:"json",beforeSubmit:o,success:i,error:function(t){console.log(arguments)},url:ajax_var.url};a.ajaxForm(r),t(".logout").click(function(e){if(e.preventDefault(),n)return!1;var o=t(this);t.ajax({type:"POST",url:"admin-ajax.php",dataType:"json",data:"action=logout_me&nonce="+t(this).data("nonce"),beforeSend:function(t){o.text("Подождите"),n=!0},success:function(t){t.success?(o.text("Выходим"),window.location.reload(!0)):alert(t.data.message)},error:function(t,e,n){console.log(arguments)},complete:function(t){n=!1}})})})}(jQuery),function(t){t(document).ready(function(){var e={successSendProject:t("#successSendProject")};t(".wpuf-form-add").submit(function(t){e.successSendProject.modal("show")})})}(jQuery),function(t){function e(t,e){e.on("click",function(){t.slideToggle()}),t.find(".nav_close").on("click",function(e){t.slideToggle(),e.preventDefault()})}t(document).ready(function(){e(t("#mainNav"),t("#navToggle"))})}(jQuery),function(t){function e(){var e=t("#pagePreloader");e.find(".spinner").fadeOut(),e.delay(350).fadeOut("slow")}t(window).on("load",function(){e()})}(jQuery),function(t){t(document).ready(function(){e.init()});var e={};e.nominationKey="nomination",e.dataAttr="data-filter",e.buttonsNominationClass="nomination_filter_button",e.galleryItemClass="filterable",e.init=function(){this.initButton(t("."+this.buttonsNominationClass))},e.initButton=function(e){var n=this;e.click(function(e){e.preventDefault(),filter=t(this).attr(n.dataAttr),elementList=t("."+n.galleryItemClass),n.filterContent(filter,elementList,n.nominationKey)})},e.filterContent=function(e,n,o){e=e.toLowerCase(),n.each(function(n,i){t(this).show(),elemAttr=t(this).attr("data-"+o),elemAttr=elemAttr.toLowerCase(),elemAttr!=e&&t(this).hide()}),console.log("filter is done: "+e)},e.removeFilter=function(e){e.each(function(e,n){t(this).show()})}}(jQuery),function(t){t(document).ready(function(){function e(){n.scrollTop()>400?o.show("fast"):o.hide("fast")}var n=t("body"),o=t(".top_link");o.on("click",function(t){t.preventDefault(),n.animate({scrollTop:0},800)}),window.onscroll=function(){e()}})}(jQuery),function(t){t(document).ready(function(){var e=t(".sort_field"),n=t(".gallery_list");e.click(function(e){e.preventDefault();var o=t(this).attr("data-sort"),i=t(this).attr("data-terms"),a={action:"myfilter",sort_type:o,terms:i};t.ajax({url:window.wp_data.ajax_url,data:a,type:"POST",beforeSend:function(t){n.find(".sort_preloader").show()},success:function(t){n.find(".sort_preloader").hide(),n.html(t)}})})})}(jQuery),function(t){t(document).ready(function(){t('[data-toggle="tooltip"]').tooltip()})}(jQuery),function(t){t(document).ready(function(){t("#updateUserInfo").submit(function(e){e.preventDefault();var n=t("#userId").val(),o=t("#userUrl").val(),i=t("#userName").val(),a=t("#formAction").val(),r=t("#currentLang").val(),s={action:a,user_id:n,user_url:o,user_name:i,current_lang:r};t.post(ajax_var,s,function(e){var n=t("#userMessages");n.text(e),n.slideToggle()})})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcm91c2VsLmpzIiwiY29udGFjdC1mb3JtLmpzIiwiY3VzdG9tX2Zvcm0uanMiLCJkYXRlX2xpbmVfY2FsY3VsYXRlLmpzIiwiaGVscGVyLmpzIiwibGluay1zY3JvbGwuanMiLCJsb2dpbi5qcyIsIm1vZGFscy5qcyIsIm5hdi5qcyIsInByZWxvYWRlci5qcyIsInByb2plY3RfZmlsdGVyLmpzIiwic2Nyb2xsLmpzIiwic29ydC1oYW5kbGVyLmpzIiwidG9vbHRpcC5qcyIsInVwZGF0ZV91c2VyLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5Iiwic2xpY2siLCJjZW50ZXJQYWRkaW5nIiwiY2VudGVyTW9kZSIsInNsaWRlc1RvU2hvdyIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsImpRdWVyeSIsInN1Ym1pdCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsInRoaXMiLCJzZXJpYWxpemUiLCJhamF4IiwidHlwZSIsInVybCIsIndpbmRvdyIsIndwX2RhdGEiLCJhamF4X3VybCIsImRhdGEiLCJzdWNjZXNzIiwibW9kYWwiLCIkbG9naW5GaWVsZCIsIiRwYXNzd29yZEZpZWxkIiwiJHJlcGVhdFBhc3N3b3JkRmllbGQiLCJhdHRyIiwidGV4dCIsIiRjYXRlZ29yeUxpc3QiLCJjaGlsZHJlbiIsIkRhdGVMaW5lIiwiaW5pdCIsIiRlbGVtZW50Q29udGFpbmVyIiwiY29udGFpbmVyIiwibGluZSIsImZpbmQiLCJkYXRlU3RhcnQiLCJEYXRlIiwicGFyc2UiLCJkYXRlRW5kIiwiY3VycmVudERhdGUiLCJub3ciLCJtb2JpbGVQYXJlbnRIZWlnaHQiLCJtb2JpbGVMaW5lIiwibW9iaWxlV2lkdGgiLCJwcm90b3R5cGUiLCJpc01vYmlsZSIsInNldE1vYmlsZUhlaWdodCIsInNldFdpZHRoIiwiZ2V0RGF0ZURlbHRhIiwic3RhcnQiLCJlbmQiLCJjdXJyZW50Iiwic3RhcnREZWx0YSIsImN1cnJlbnREZWx0YSIsImRlbHRhIiwiY29uc29sZSIsImxvZyIsIndpZHRoIiwiY2FsY3VsYXRlV2lkdGgiLCJjc3MiLCJoZWlnaHQiLCJjYWxjdWxhdGVNb2JpbGVIZWlnaHQiLCJwYXJlbnRIZWlnaHQiLCJNYXRoIiwiZmxvb3IiLCIkaGVscGVyIiwiJGNsb3NlVG9nZ2xlIiwib24iLCJzbGlkZVRvZ2dsZSIsIm1ha2VTY3JvbGxMaW5rIiwiJGxpbmsiLCJocmVmIiwiJGVsVGFyZ2V0Iiwic2Nyb2xsIiwiZ2V0U2Nyb2xsIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIiRlbCIsIiRzY3JvbGwiLCJvZmZzZXQiLCJ0b3AiLCIkc2Nyb2xsTGluayIsImJ1aWxkTWVzc2FnZSIsIm1lc3NhZ2UiLCJhamF4R28iLCJyZXFHbyIsImZvcm0iLCJvcHRpb25zIiwiaHRtbCIsInZhbCIsInJlcUNvbWUiLCJzdGF0dXNUZXh0IiwieGhyIiwiYXJndW1lbnRzIiwibmV4dFN0ZXBNb2RhbCIsInJlc3BvbnNlIiwicHJvcCIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJ1c2VyRm9ybSIsImFyZ3MiLCJkYXRhVHlwZSIsImJlZm9yZVN1Ym1pdCIsImVycm9yIiwiYWpheF92YXIiLCJhamF4Rm9ybSIsImNsaWNrIiwibGluayIsImJlZm9yZVNlbmQiLCJyZWxvYWQiLCJhbGVydCIsImFqYXhPcHRpb25zIiwidGhyb3duRXJyb3IiLCJjb21wbGV0ZSIsIk1vZGFscyIsInN1Y2Nlc3NTZW5kUHJvamVjdCIsImluaXROYXYiLCIkbmF2IiwiJHRvZ2dsZUJ0biIsImluaXRQcmVsb2FkZXIiLCIkcHJlbG9hZGVyIiwiZmFkZU91dCIsImRlbGF5IiwiRmlsdGVyIiwibm9taW5hdGlvbktleSIsImRhdGFBdHRyIiwiYnV0dG9uc05vbWluYXRpb25DbGFzcyIsImdhbGxlcnlJdGVtQ2xhc3MiLCJpbml0QnV0dG9uIiwiYnV0dG9ucyIsInNlbGYiLCJmaWx0ZXIiLCJlbGVtZW50TGlzdCIsImZpbHRlckNvbnRlbnQiLCJleHAiLCJhdHRyVmFsIiwidG9Mb3dlckNhc2UiLCJlYWNoIiwia2V5IiwidmFsdWUiLCJzaG93IiwiZWxlbUF0dHIiLCJoaWRlIiwicmVtb3ZlRmlsdGVyIiwiaW5pdFRvcExpbmsiLCIkYm9keSIsIiR0b3BMaW5rIiwib25zY3JvbGwiLCJzb3J0RmllbGQiLCJnYWxsZXJ5TGlzdCIsInNvcnRUeXBlIiwidGVybXMiLCJyZXNwb25zZURhdGEiLCJhY3Rpb24iLCJzb3J0X3R5cGUiLCJ0b29sdGlwIiwidXNlcklkIiwidXNlclVybCIsInVzZXJOYW1lIiwiZm9ybUFjdGlvbiIsImN1cnJlbnRMYW5nIiwidXNlcl9pZCIsInVzZXJfdXJsIiwidXNlcl9uYW1lIiwiY3VycmVudF9sYW5nIiwicG9zdCIsIiR1c2VyTWVzc2FnZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsR0FFQUEsRUFBQUMsVUFBQUMsTUFBQSxXQUNBRixFQUFBLGlCQUNBRyxPQUNBQyxjQUFBLE1BQ0FDLFlBQUEsRUFDQUMsYUFBQSxFQUNBQyxVQUFBLHFGQUNBQyxVQUFBLDRGQUlBQyxRQ1ZBLFNBQUFULEdBRUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FFQUYsRUFBQSxnQkFBQVUsT0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxnQkFDQSxJQUFBQyxHQUFBYixFQUFBYyxNQUFBQyxXQUNBRixHQUFBLE1BRUFiLEdBQUFnQixNQUNBQyxLQUFBLE9BQ0FDLElBQUFDLE9BQUFDLFFBQUFDLFNBQ0FDLEtBQUFULEVBQ0FVLFFBQUEsV0FDQXZCLEVBQUEsaUJBQ0F3QixNQUFBLGdCQVFBZixRQ3ZCQSxTQUFBVCxHQUVBQSxFQUFBQyxVQUFBQyxNQUFBLFdBRUEsR0FJQXVCLEdBQUF6QixFQUFBLG9CQUNBMEIsRUFBQTFCLEVBQUEsbUJBQ0EyQixFQUFBM0IsRUFBQSxTQUdBeUIsR0FBQUcsS0FBQSxjQVRBLFNBVUFGLEVBQUFFLEtBQUEsY0FUQSxVQVVBRCxFQUFBQyxLQUFBLGNBVEEsbUJBc0JBNUIsR0FBQSwwQ0FHQTZCLEtBRkEseUJBSUE3QixHQUFBLGtDQUdBNkIsS0FGQSwyQkFLQSxJQUFBQyxHQUFBOUIsRUFBQSx1Q0FHQThCLEdBQUFBLEVBQUFDLFNBQUEsVUFDQUQsRUFBQUQsS0FIQSxjQU9BcEIsUUMvQ0EsU0FBQVQsR0FFQUEsRUFBQUMsVUFBQUMsTUFBQSxXQUdBLEdBQUE4QixHQUFBaEMsRUFBQSx1QkFDQWlDLFFBVUEsSUFBQUQsR0FBQSxTQUFBRSxHQUNBcEIsS0FBQXFCLFVBQUFELEVBQ0FwQixLQUFBc0IsS0FBQUYsRUFBQUcsS0FBQSxjQUNBdkIsS0FBQXdCLFVBQUFDLEtBQUFDLE1BQUFOLEVBQUFOLEtBQUEsbUJBQ0FkLEtBQUEyQixRQUFBRixLQUFBQyxNQUFBTixFQUFBTixLQUFBLGlCQUNBZCxLQUFBNEIsWUFBQUgsS0FBQUksTUFDQTdCLEtBQUE4QixtQkFBQSxJQUNBOUIsS0FBQStCLFdBQUE3QyxFQUFBLHFCQUNBYyxLQUFBZ0MsWUFBQSxNQU1BZCxHQUFBZSxVQUFBZCxLQUFBLFdBQ0EsTUFBQW5CLE1BQUFrQyxZQUlBbEMsS0FBQW1DLG1CQUNBLElBSkFuQyxLQUFBb0MsWUFDQSxJQVNBbEIsRUFBQWUsVUFBQUksYUFBQSxXQUNBLEdBQUFDLEdBQUF0QyxLQUFBd0IsVUFDQWUsRUFBQXZDLEtBQUEyQixRQUNBYSxFQUFBeEMsS0FBQTRCLFlBRUFhLEVBQUFGLEVBQUFELEVBQ0FJLEVBQUFGLEVBQUFGLEVBQ0FLLEVBQUEsSUFBQUQsRUFBQUQsQ0FJQSxPQUZBRyxTQUFBQyxJQUFBRixHQUVBQSxHQU9BekIsRUFBQWUsVUFBQUMsU0FBQSxXQUNBLE1BQUFoRCxHQUFBbUIsUUFBQXlDLFFBQUE5QyxLQUFBZ0MsYUFNQWQsRUFBQWUsVUFBQUcsU0FBQSxXQUNBLEdBQUFVLEdBQUE5QyxLQUFBK0MsZ0JBRUEvQyxNQUFBc0IsS0FBQTBCLElBQUEsUUFBQUYsSUFHQTVCLEVBQUFlLFVBQUFjLGVBQUEsV0FFQSxNQURBL0MsTUFBQXFDLGVBQ0EsS0FJQW5CLEVBQUFlLFVBQUFFLGdCQUFBLFdBQ0EsR0FBQWMsR0FBQWpELEtBQUFrRCx1QkFDQU4sU0FBQUMsSUFBQUksR0FDQWpELEtBQUErQixXQUFBaUIsSUFBQSxTQUFBQyxJQUdBL0IsRUFBQWUsVUFBQWlCLHNCQUFBLFdBQ0EsR0FBQVAsR0FBQTNDLEtBQUFxQyxlQUNBYyxFQUFBbkQsS0FBQThCLGtCQUdBLE9BRkFzQixNQUFBQyxNQUFBRixHQUFBUixFQUFBLE1BRUEsT0FLQWhELFFDL0ZBLFNBQUFULEdBR0FBLEVBQUFDLFVBQUFDLE1BQUEsV0FFQSxHQUFBa0UsR0FBQXBFLEVBQUEsV0FDQXFFLEVBQUFELEVBQUEvQixLQUFBLGdCQUNBckMsR0FBQSxpQkFFQXNFLEdBQUEsUUFBQSxTQUFBM0QsR0FDQXlELEVBQUFHLFlBQUEsUUFDQTVELEVBQUFDLG1CQUlBeUQsRUFBQUMsR0FBQSxRQUFBLFNBQUEzRCxHQUNBeUQsRUFBQUcsWUFBQSxRQUNBNUQsRUFBQUMsc0JBT0FILFFDdkJBLFNBQUFULEdBR0FBLEVBQUFDLFVBQUFDLE1BQUEsV0FxQkEsUUFBQXNFLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQTdDLEtBQUEsUUFDQStDLEVBQUEzRSxFQUFBMEUsR0FDQUUsRUFBQUMsRUFBQUYsRUFDQTNFLEdBQUEsUUFDQThFLFNBQUFDLFVBQUFILEdBQUEsS0FDQTVFLEVBQUEsWUFBQXVFLGNBU0EsUUFBQU0sR0FBQUcsR0FFQSxHQUFBQyxHQUFBRCxFQUFBRSxTQUFBQyxJQUFBLEdBR0EsT0FEQXpCLFNBQUFDLElBQUFzQixHQUNBQSxHQWxDQSxXQUNBLEdBQUFHLEdBQUFwRixFQUFBLGVBRUFvRixHQUFBZCxHQUFBLFFBQUEsU0FBQTNELEdBRUFBLEVBQUFDLGlCQUVBNEQsRUFBQVksV0FzQ0EzRSxRQ3hEQSxTQUFBVCxHQTJGQSxRQUFBcUYsR0FBQUMsRUFBQXJFLEdBQ0EsTUFBQSxTQUFBQSxFQUVBLG1EQUFBcUUsRUFBQSxhQUdBLHFEQUFBQSxFQUFBLGFBL0ZBLEdBQUFDLElBQUEsQ0FFQXZGLEdBQUFDLFVBQUFDLE1BQUEsV0FJQSxRQUFBc0YsR0FBQWxFLEVBQUFtRSxFQUFBQyxHQUNBLEdBQUFILEVBRUEsTUFEQUUsR0FBQXBELEtBQUEsWUFBQXNELEtBQUEsMkRBQ0EsQ0FFQUYsR0FBQXBELEtBQUEsd0JBQUFULEtBQUEsV0FBQSxZQUFBZ0UsSUFBQSxhQUNBSCxFQUFBcEQsS0FBQSxhQUFBc0QsS0FBQSxJQUNBSixHQUFBLEVBRUEsUUFBQU0sR0FBQXZFLEVBQUF3RSxFQUFBQyxFQUFBTixHQUVBLEdBREEvQixRQUFBQyxJQUFBcUMsV0FDQTFFLEVBQUFDLFFBQUEsQ0FFQSxHQUFBMEUsR0FBQWpHLEVBQUEsZUFJQSxJQUFBLE9BSEFpRyxFQUFBakcsRUFBQWlHLEVBQUFMLFFBSUE1RixFQUFBLHNCQUFBd0IsTUFBQSxRQUNBeUUsRUFBQXpFLE1BQUEsWUFDQSxDQUNBLEdBQUEwRSxHQUFBYixFQUFBL0QsRUFBQUEsS0FBQWdFLFFBQUEsVUFDQUcsR0FBQXBELEtBQUEsd0JBQUE4RCxLQUFBLFlBQUEsR0FBQVAsSUFBQSxlQUVBLENBQ0EsR0FBQU0sR0FBQWIsRUFBQS9ELEVBQUFBLEtBQUFnRSxRQUFBLFFBQ0FHLEdBQUFwRCxLQUFBLHdCQUFBOEQsS0FBQSxZQUFBLEdBQUFQLElBQUEsYUFFQUgsRUFBQXBELEtBQUEsYUFBQXNELEtBQUFPLEdBQ0E1RSxFQUFBQSxLQUFBOEUsV0FDQWpGLE9BQUFrRixTQUFBM0IsS0FBQXBELEVBQUFBLEtBQUE4RSxVQUVBYixHQUFBLEVBbENBLEdBQUFlLEdBQUF0RyxFQUFBLGFBcUNBdUcsR0FDQUMsU0FBQSxPQUNBQyxhQUFBakIsRUFDQWpFLFFBQUFzRSxFQUNBYSxNQUFBLFNBQUFwRixHQUNBb0MsUUFBQUMsSUFBQXFDLFlBRUE5RSxJQUFBeUYsU0FBQXpGLElBRUFvRixHQUFBTSxTQUFBTCxHQUVBdkcsRUFBQSxXQUFBNkcsTUFBQSxTQUFBbEcsR0FHQSxHQURBQSxFQUFBQyxpQkFDQTJFLEVBQUEsT0FBQSxDQUNBLElBQUF1QixHQUFBOUcsRUFBQWMsS0FDQWQsR0FBQWdCLE1BQ0FDLEtBQUEsT0FDQUMsSUFBQSxpQkFDQXNGLFNBQUEsT0FDQWxGLEtBQUEsMEJBQUF0QixFQUFBYyxNQUFBUSxLQUFBLFNBQ0F5RixXQUFBLFNBQUF6RixHQUNBd0YsRUFBQWpGLEtBQUEsYUFDQTBELEdBQUEsR0FFQWhFLFFBQUEsU0FBQUQsR0FDQUEsRUFBQUMsU0FDQXVGLEVBQUFqRixLQUFBLFdBQ0FWLE9BQUFrRixTQUFBVyxRQUFBLElBRUFDLE1BQUEzRixFQUFBQSxLQUFBZ0UsVUFHQW9CLE1BQUEsU0FBQVgsRUFBQW1CLEVBQUFDLEdBQ0F6RCxRQUFBQyxJQUFBcUMsWUFFQW9CLFNBQUEsU0FBQTlGLEdBQ0FpRSxHQUFBLFVBcUJBOUUsUUNyR0EsU0FBQVQsR0FDQUEsRUFBQUMsVUFBQUMsTUFBQSxXQUVBLEdBQUFtSCxJQUNBQyxtQkFBQXRILEVBQUEsdUJBSUFBLEdBQUEsa0JBRUFVLE9BQUEsU0FBQUMsR0FDQTBHLEVBQUFDLG1CQUFBOUYsTUFBQSxhQVFBZixRQ2pCQSxTQUFBVCxHQVlBLFFBQUF1SCxHQUFBQyxFQUFBQyxHQUVBQSxFQUFBbkQsR0FBQSxRQUFBLFdBRUFrRCxFQUFBakQsZ0JBSUFpRCxFQUFBbkYsS0FBQSxjQUVBaUMsR0FBQSxRQUFBLFNBQUEzRCxHQUVBNkcsRUFBQWpELGNBQ0E1RCxFQUFBQyxtQkF2QkFaLEVBQUFDLFVBQUFDLE1BQUEsV0FFQXFILEVBQUF2SCxFQUFBLFlBQUFBLEVBQUEsa0JBa0NBUyxRQ3hDQSxTQUFBVCxHQVdBLFFBQUEwSCxLQUNBLEdBQUFDLEdBQUEzSCxFQUFBLGlCQUNBMkgsR0FBQXRGLEtBQUEsWUFFQXVGLFVBQ0FELEVBQUFFLE1BQUEsS0FBQUQsUUFBQSxRQWJBNUgsRUFBQW1CLFFBQUFtRCxHQUFBLE9BQUEsV0FDQW9ELE9BZUFqSCxRQ2xCQSxTQUFBVCxHQUdBQSxFQUFBQyxVQUFBQyxNQUFBLFdBQ0E0SCxFQUFBN0YsUUFJQSxJQUFBNkYsS0FFQUEsR0FBQUMsY0FBQSxhQUNBRCxFQUFBRSxTQUFBLGNBQ0FGLEVBQUFHLHVCQUFBLDJCQUNBSCxFQUFBSSxpQkFBQSxhQUtBSixFQUFBN0YsS0FBQSxXQUVBbkIsS0FBQXFILFdBQUFuSSxFQUFBLElBQUFjLEtBQUFtSCwwQkFPQUgsRUFBQUssV0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUF2SCxJQUNBc0gsR0FBQXZCLE1BQUEsU0FBQWxHLEdBQ0FBLEVBQUFDLGlCQUVBMEgsT0FBQXRJLEVBQUFjLE1BQUFjLEtBQUF5RyxFQUFBTCxVQUVBTyxZQUFBdkksRUFBQSxJQUFBcUksRUFBQUgsa0JBQ0FHLEVBQUFHLGNBQUFGLE9BQUFDLFlBQUFGLEVBQUFOLGtCQVlBRCxFQUFBVSxjQUFBLFNBQUFDLEVBQUFGLEVBQUFHLEdBRUFELEVBQUFBLEVBQUFFLGNBRUFKLEVBQUFLLEtBQUEsU0FBQUMsRUFBQUMsR0FDQTlJLEVBQUFjLE1BQUFpSSxPQUNBQyxTQUFBaEosRUFBQWMsTUFBQWMsS0FBQSxRQUFBOEcsR0FDQU0sU0FBQUEsU0FBQUwsY0FDQUssVUFBQVAsR0FDQXpJLEVBQUFjLE1BQUFtSSxTQUlBdkYsUUFBQUMsSUFBQSxtQkFBQThFLElBT0FYLEVBQUFvQixhQUFBLFNBQUFYLEdBRUFBLEVBQUFLLEtBQUEsU0FBQUMsRUFBQUMsR0FFQTlJLEVBQUFjLE1BQUFpSSxXQVlBdEksUUN2RkEsU0FBQVQsR0FFQUEsRUFBQUMsVUFBQUMsTUFBQSxXQW9CQSxRQUFBaUosS0FDQUMsRUFBQXJFLFlBQUEsSUFDQXNFLEVBQUFOLEtBQUEsUUFFQU0sRUFBQUosS0FBQSxRQXZCQSxHQUFBRyxHQUFBcEosRUFBQSxRQUNBcUosRUFBQXJKLEVBQUEsWUFFQXFKLEdBQUEvRSxHQUFBLFFBQUEsU0FBQTNELEdBRUFBLEVBQUFDLGlCQUNBd0ksRUFBQXRFLFNBQUFDLFVBQUEsR0FBQSxPQUtBNUQsT0FBQW1JLFNBQUEsV0FDQUgsUUFvQkExSSxRQy9CQSxTQUFBVCxHQUdBQSxFQUFBQyxVQUFBQyxNQUFBLFdBRUEsR0FBQXFKLEdBQUF2SixFQUFBLGVBQ0F3SixFQUFBeEosRUFBQSxnQkFDQXVKLEdBQUExQyxNQUFBLFNBQUFsRyxHQUNBQSxFQUFBQyxnQkFDQSxJQUFBNkksR0FBQXpKLEVBQUFjLE1BQUFjLEtBQUEsYUFDQThILEVBQUExSixFQUFBYyxNQUFBYyxLQUFBLGNBQ0ErSCxHQUNBQyxPQUFBLFdBQ0FDLFVBQUFKLEVBQ0FDLE1BQUFBLEVBRUExSixHQUFBZ0IsTUFDQUUsSUFBQUMsT0FBQUMsUUFBQUMsU0FDQUMsS0FBQXFJLEVBQ0ExSSxLQUFBLE9BQ0E4RixXQUFBLFNBQUFoQixHQUNBeUQsRUFBQW5ILEtBQUEsbUJBQUEwRyxRQUVBeEgsUUFBQSxTQUFBRCxHQUNBa0ksRUFBQW5ILEtBQUEsbUJBQUE0RyxPQUNBTyxFQUFBN0QsS0FBQXJFLFdBU0FiLFFDbENBLFNBQUFULEdBRUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FDQUYsRUFBQSwyQkFBQThKLGFBR0FySixRQ1BBLFNBQUFULEdBRUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FFQUYsRUFBQSxtQkFFQVUsT0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxnQkFFQSxJQUFBbUosR0FBQS9KLEVBQUEsV0FBQTRGLE1BQ0FvRSxFQUFBaEssRUFBQSxZQUFBNEYsTUFDQXFFLEVBQUFqSyxFQUFBLGFBQUE0RixNQUNBc0UsRUFBQWxLLEVBQUEsZUFBQTRGLE1BQ0F1RSxFQUFBbkssRUFBQSxnQkFBQTRGLE1BRUEvRSxHQUNBK0ksT0FBQU0sRUFDQUUsUUFBQUwsRUFDQU0sU0FBQUwsRUFDQU0sVUFBQUwsRUFDQU0sYUFBQUosRUFHQW5LLEdBQUF3SyxLQUFBN0QsU0FBQTlGLEVBQUEsU0FBQXFGLEdBQ0EsR0FBQXVFLEdBQUF6SyxFQUFBLGdCQUVBeUssR0FBQTVJLEtBQUFxRSxHQUNBdUUsRUFBQWxHLHFCQW1CQTlEIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oICQgKSB7XHJcblxyXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICB2YXIgc2xpZGVyID0gJCgnI2NlbnRlclNsaWRlcicpO1xyXG4gICAgICAgIHNsaWRlci5zbGljayh7XHJcbiAgICAgICAgICAgY2VudGVyUGFkZGluZzogJzBweCcsXHJcbiAgICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogNSxcclxuICAgICAgICAgICAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cImFycm93IGxlZnRcIj48aSBjbGFzcz1cInNvY2lhbF9hcnJvdyBzb2NpYWxfYXJyb3ctYXJyb3dfbGVmdFwiPjwvaT48L2Rpdj4nLFxyXG4gICAgICAgICAgICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwiYXJyb3cgcmlnaHRcIj48aSBjbGFzcz1cInNvY2lhbF9hcnJvdyBzb2NpYWxfYXJyb3ctYXJyb3dfcmlnaHRcIj48L2k+PC9kaXY+JyxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxufSkoalF1ZXJ5KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDA3LjA0LjIwMTcuXG4gKi9cbihmdW5jdGlvbiggJCApIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICQoJyNjb250YWN0Rm9ybScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gJCh0aGlzKS5zZXJpYWxpemUoKTtcbiAgICAgICAgICAgdmFyIGFjdGlvbiA9IGZvcm1EYXRhWydhY3Rpb24nXTtcblxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6IHdpbmRvdy53cF9kYXRhLmFqYXhfdXJsLFxuICAgICAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGNvbnRhY3RNb2RhbCA9ICQoJyNjb250YWN0TW9kYWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhY3RNb2RhbC5tb2RhbCgnc2hvdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMDUuMDQuMjAxNy5cbiAqL1xuKGZ1bmN0aW9uKCAkICkge1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIGxvZ2luTGFiZWwgPSAnRW1haWwnLFxuICAgICAgICAgICAgcGFzc0xhYmVsID0gJ9Cf0LDRgNC+0LvRjCcsXG4gICAgICAgICAgICByZXBlYXRQYXNzTGFiZWwgPSAn0J/QvtCy0YLQvtGA0LjRgtC1INC/0LDRgNC+0LvRjCc7XG5cbiAgICAgICB2YXIgJGxvZ2luRmllbGQgPSAkKCcjd3B1Zi11c2VyX2xvZ2luJyksXG4gICAgICAgICAgICRwYXNzd29yZEZpZWxkID0gJCgnI3dwdWYtdXNlcl9wYXNzJyksXG4gICAgICAgICAgICRyZXBlYXRQYXNzd29yZEZpZWxkID0gJCgnI3Bhc3MyJyk7XG5cblxuICAgICAgICAkbG9naW5GaWVsZC5hdHRyKCdwbGFjZWhvbGRlcicsIGxvZ2luTGFiZWwpO1xuICAgICAgICAkcGFzc3dvcmRGaWVsZC5hdHRyKCdwbGFjZWhvbGRlcicsIHBhc3NMYWJlbCk7XG4gICAgICAgICRyZXBlYXRQYXNzd29yZEZpZWxkLmF0dHIoJ3BsYWNlaG9sZGVyJywgcmVwZWF0UGFzc0xhYmVsKTtcblxuICAgICAgICAvLyB2YXIgJHJlZ0Zvcm0gPSAkKCcucmVnX2Zvcm0nKS5maW5kKCdmb3JtJyksXG4gICAgICAgIC8vICAgICAkaW5mb01vZGFsID0gJCgnI2luZm9SZWdpc3RyYXRpb24nKSxcbiAgICAgICAgLy8gICAgICRyZWdpc3RyYXRpb25Nb2RhbCA9ICQoJyNyZWdpc3RyYXRpb25Nb2RhbCcpO1xuICAgICAgICAvL1xuICAgICAgICAvLyAkcmVnRm9ybS5vbignc3VibWl0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICAkcmVnaXN0cmF0aW9uTW9kYWwubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgLy8gICAgICRpbmZvTW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgLy8gfSk7XG5cblxuXG4gICAgICAgIHZhciAkcGRmRmllbGQgPSAkKCcjd3B1Zi1fX19fX19fX19fX19fX19fX19fcGRmLXBpY2tmaWxlcycpLFxuICAgICAgICAgICAgcGRmRmllbGRMYWJlbCA9ICfQl9Cw0LPRgNGD0LfQuNGC0Ywg0YDQsNCx0L7RgtGDINCyIHBkZic7XG5cbiAgICAgICAgJHBkZkZpZWxkLnRleHQocGRmRmllbGRMYWJlbCk7XG5cbiAgICAgICAgdmFyICR0aHVtYkZpZWxkID0gJCgnI3dwdWYtZmVhdHVyZWRfaW1hZ2UtcGlja2ZpbGVzJyksXG4gICAgICAgICAgICB0aHVtYkZpZWxkTGFiZWwgPSAn0JfQsNCz0YDRg9C30LjRgtGMINC/0YDQtdCy0YzRjiDQsiBqcGcnO1xuXG4gICAgICAgICR0aHVtYkZpZWxkLnRleHQodGh1bWJGaWVsZExhYmVsKTtcbiAgICB9KTtcblxuICAgIHZhciAkY2F0ZWdvcnlMaXN0ID0gJCgnLndwdWZfY2F0ZWdvcnlfc2VsZWN0XzM1M18zNTIgc2VsZWN0JyksXG4gICAgICAgIGNhdGVnb3J5TGFiZWwgPSAn0JrQsNGC0LXQs9C+0YDQuNGPJztcblxuICAgICRjYXRlZ29yeUxpc3QgPSAkY2F0ZWdvcnlMaXN0LmNoaWxkcmVuKCc6Zmlyc3QnKTtcbiAgICAkY2F0ZWdvcnlMaXN0LnRleHQoY2F0ZWdvcnlMYWJlbCk7XG5cblxuXG59KShqUXVlcnkpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IG1hc3RlciBvbiAxMi4wNS4yMDE3LlxuICovXG4oZnVuY3Rpb24oJCkge1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblxuXG4gICAgICAgIHZhciBkYXRlTGluZSA9IG5ldyBEYXRlTGluZSgkKCcjZGF0ZUxpbmVDb250YWluZXInKSk7XG4gICAgICAgIGRhdGVMaW5lLmluaXQoKTtcblxuXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7anF1ZXJ5fSAkZWxlbWVudENvbnRhaW5lclxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICB2YXIgRGF0ZUxpbmUgPSBmdW5jdGlvbigkZWxlbWVudENvbnRhaW5lcikge1xuICAgICAgdGhpcy5jb250YWluZXIgPSAkZWxlbWVudENvbnRhaW5lcjtcbiAgICAgIHRoaXMubGluZSA9ICRlbGVtZW50Q29udGFpbmVyLmZpbmQoJy5kYXRlX2xpbmUnKTtcbiAgICAgIHRoaXMuZGF0ZVN0YXJ0ID0gIERhdGUucGFyc2UoJGVsZW1lbnRDb250YWluZXIuYXR0cignZGF0YS1kYXRlc3RhcnQnKSk7XG4gICAgICB0aGlzLmRhdGVFbmQgPSBEYXRlLnBhcnNlKCRlbGVtZW50Q29udGFpbmVyLmF0dHIoJ2RhdGEtZGF0ZWVuZCcpKTtcbiAgICAgIHRoaXMuY3VycmVudERhdGUgPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5tb2JpbGVQYXJlbnRIZWlnaHQgPSAyNzY7XG4gICAgICB0aGlzLm1vYmlsZUxpbmUgPSAkKCcuZGF0ZV9saW5lX21vYmlsZScpO1xuICAgICAgdGhpcy5tb2JpbGVXaWR0aCA9ICc3NjcnO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBEYXRlTGluZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRNb2JpbGVIZWlnaHQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgRGF0ZUxpbmUucHJvdG90eXBlLmdldERhdGVEZWx0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmRhdGVTdGFydDtcbiAgICAgICAgdmFyIGVuZCA9IHRoaXMuZGF0ZUVuZDtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmN1cnJlbnREYXRlO1xuXG4gICAgICAgIHZhciBzdGFydERlbHRhID0gZW5kIC0gc3RhcnQ7XG4gICAgICAgIHZhciBjdXJyZW50RGVsdGEgPSBjdXJyZW50IC0gc3RhcnQ7XG4gICAgICAgIHZhciBkZWx0YSA9IChjdXJyZW50RGVsdGEgKiAxMDApIC8gc3RhcnREZWx0YTtcblxuICAgICAgICBjb25zb2xlLmxvZyhkZWx0YSk7XG5cbiAgICAgICAgcmV0dXJuIGRlbHRhO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIERhdGVMaW5lLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJCh3aW5kb3cpLndpZHRoKCkgPCB0aGlzLm1vYmlsZVdpZHRoO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIERhdGVMaW5lLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgIHZhciB3aWR0aCA9IHRoaXMuY2FsY3VsYXRlV2lkdGgoKTtcblxuICAgICAgICB0aGlzLmxpbmUuY3NzKCd3aWR0aCcsIHdpZHRoKTtcbiAgICB9O1xuXG4gICAgRGF0ZUxpbmUucHJvdG90eXBlLmNhbGN1bGF0ZVdpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkZWx0YSA9IHRoaXMuZ2V0RGF0ZURlbHRhKCk7XG4gICAgICAgcmV0dXJuIGRlbHRhICsgJyUnO1xuICAgIH07XG5cblxuICAgIERhdGVMaW5lLnByb3RvdHlwZS5zZXRNb2JpbGVIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuY2FsY3VsYXRlTW9iaWxlSGVpZ2h0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGhlaWdodCk7XG4gICAgICAgIHRoaXMubW9iaWxlTGluZS5jc3MoJ2hlaWdodCcsIGhlaWdodCk7XG4gICAgfTtcblxuICAgIERhdGVMaW5lLnByb3RvdHlwZS5jYWxjdWxhdGVNb2JpbGVIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRlbHRhID0gdGhpcy5nZXREYXRlRGVsdGEoKTtcbiAgICAgICAgdmFyIHBhcmVudEhlaWdodCA9IHRoaXMubW9iaWxlUGFyZW50SGVpZ2h0O1xuICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5mbG9vcihwYXJlbnRIZWlnaHQgKiAoZGVsdGEgLyAxMDApKTtcblxuICAgICAgICByZXR1cm4gaGVpZ2h0ICsgJ3B4JztcbiAgICB9O1xuXG5cblxufSkoalF1ZXJ5KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDI0LjAzLjIwMTcuXG4gKi9cbihmdW5jdGlvbiggJCApIHtcblxuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciAkaGVscGVyID0gJCgnLmhlbHBlcicpO1xuICAgICAgdmFyICRjbG9zZVRvZ2dsZSA9ICRoZWxwZXIuZmluZCgnLmhlbHBlcl9jbG9zZScpO1xuICAgICAgdmFyICRoZWxwZXJUb2dnbGUgPSAkKCcjaGVscGVyVG9nZ2xlJyk7XG5cbiAgICAgICRoZWxwZXJUb2dnbGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICRoZWxwZXIuc2xpZGVUb2dnbGUoJ2Zhc3QnKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB9KTtcblxuICAgICAgICAkY2xvc2VUb2dnbGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgJGhlbHBlci5zbGlkZVRvZ2dsZSgnZmFzdCcpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDA3LjA0LjIwMTcuXG4gKi9cblxuKGZ1bmN0aW9uKCAkICkge1xuICAgIFxuICAgIFxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgIGluaXRTY3JvbGxMaW5rKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbml0U2Nyb2xsTGluaygpIHtcbiAgICAgICAgICAgIHZhciAkc2Nyb2xsTGluayA9ICQoJy5zY3JvbGxfbGluaycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkc2Nyb2xsTGluay5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtYWtlU2Nyb2xsTGluaygkc2Nyb2xsTGluayk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRsaW5rXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBtYWtlU2Nyb2xsTGluaygkbGluaykge1xuICAgICAgICAgICAgdmFyIGhyZWYgPSAkbGluay5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICB2YXIgJGVsVGFyZ2V0ID0gJChocmVmKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGwgPSBnZXRTY3JvbGwoJGVsVGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTtcbiAgICAgICAgICAgICRib2R5LmFuaW1hdGUoe3Njcm9sbFRvcDogc2Nyb2xsfSwgODAwKTtcbiAgICAgICAgICAgICQoJyNtYWluTmF2Jykuc2xpZGVUb2dnbGUoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVsXG4gICAgICAgICAqIEByZXR1cm5zIHtJbnRlZ2VyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2Nyb2xsKCRlbCkge1xuICAgICAgICAgICAgXG4gICAgICAgIHZhciAkc2Nyb2xsID0gJGVsLm9mZnNldCgpLnRvcCAtIDMyNTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2Nyb2xsKTtcbiAgICAgICAgICAgIHJldHVybiAkc2Nyb2xsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH0pO1xuICAgIFxuICAgIFxuICAgIFxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMjguMDMuMjAxNy5cbiAqL1xuKGZ1bmN0aW9uKCAkICkge1xuXG4gICAgdmFyIGFqYXhHbyA9IGZhbHNlO1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIHVzZXJGb3JtID0gJCgnLnVzZXJmb3JtJyk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVxR28oZGF0YSwgZm9ybSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGFqYXhHbykge1xuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgncmVzcG9uc2UnKS5odG1sKCc8cD7QndC10L7QsdGF0L7QtNC40LzQviDQtNC+0LbQtNCw0YLRjNGB0Y8g0L7RgtCy0LXRgtCwINC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0LfQsNC/0YDQvtGB0LA8L3A+Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKS52YWwoJ9Cf0L7QtNC+0LbQtNC40YLQtScpO1xuICAgICAgICAgICAgZm9ybS5maW5kKCcucmVzcG9uc2UnKS5odG1sKCcnKTtcbiAgICAgICAgICAgIGFqYXhHbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmVxQ29tZShkYXRhLCBzdGF0dXNUZXh0LCB4aHIsIGZvcm0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV4dFN0ZXBNb2RhbCA9ICQoJyNzdGVwU3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwTW9kYWwgPSAkKG5leHRTdGVwTW9kYWwudmFsKCkpO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dFN0ZXBNb2RhbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNyZWdpc3RyYXRpb25Nb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIG5leHRTdGVwTW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBidWlsZE1lc3NhZ2UoZGF0YS5kYXRhLm1lc3NhZ2UsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnZhbCgn0JPQvtGC0L7QstC+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBidWlsZE1lc3NhZ2UoZGF0YS5kYXRhLm1lc3NhZ2UsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnZhbCgn0J7RgtC/0YDQsNCy0LjRgtGMJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JtLmZpbmQoJy5yZXNwb25zZScpLmh0bWwocmVzcG9uc2UpO1xuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZWRpcmVjdCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YS5kYXRhLnJlZGlyZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWpheEdvID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBiZWZvcmVTdWJtaXQ6IHJlcUdvLFxuICAgICAgICAgICAgc3VjY2VzczogcmVxQ29tZSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cmw6IGFqYXhfdmFyLnVybFxuICAgICAgICB9O1xuICAgICAgICB1c2VyRm9ybS5hamF4Rm9ybShhcmdzKTtcblxuICAgICAgICAkKCcubG9nb3V0JykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChhamF4R28pIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHZhciBsaW5rID0gJCh0aGlzKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogJ2FkbWluLWFqYXgucGhwJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGRhdGE6ICdhY3Rpb249bG9nb3V0X21lJm5vbmNlPScgKyAkKHRoaXMpLmRhdGEoJ25vbmNlJyksXG4gICAgICAgICAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5rLnRleHQoJ9Cf0L7QtNC+0LbQtNC40YLQtScpO1xuICAgICAgICAgICAgICAgICAgICBhamF4R28gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnRleHQoJ9CS0YvRhdC+0LTQuNC8Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoZGF0YS5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGFqYXhHbyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSk7XG5cblxuXG4gICAgfSk7XG5cblxuICAgIGZ1bmN0aW9uIGJ1aWxkTWVzc2FnZShtZXNzYWdlLCB0eXBlKSB7XG4gICAgICAgIGlmICh0eXBlID09ICdlcnJvcicpIHtcblxuICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+PHAgY2xhc3M9XCJibGFja1wiPicgKyBtZXNzYWdlICsgJzwvcD48L2Rpdj4nO1xuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPjxwIGNsYXNzPVwiYmxhY2tcIj4nICsgbWVzc2FnZSArICc8L3A+PC9kaXY+JztcbiAgICB9XG5cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMjkuMDMuMjAxNy5cbiAqL1xuKGZ1bmN0aW9uKCAkICkge1xuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBNb2RhbHMgPSB7XG4gICAgICAgICAgICAnc3VjY2Vzc1NlbmRQcm9qZWN0JzogJCgnI3N1Y2Nlc3NTZW5kUHJvamVjdCcpXG4gICAgICAgIH07XG5cblxuICAgICAgIHZhciAkY3JlYXRlUHJvamVjdEZvcm0gPSAkKCcud3B1Zi1mb3JtLWFkZCcpO1xuXG4gICAgICAgICRjcmVhdGVQcm9qZWN0Rm9ybS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIE1vZGFscy5zdWNjZXNzU2VuZFByb2plY3QubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMjQuMDMuMjAxNy5cbiAqL1xuXG5cbihmdW5jdGlvbiggJCApIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgaW5pdE5hdigkKCcjbWFpbk5hdicpLCAkKCcjbmF2VG9nZ2xlJykpO1xuXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gJG5hdlxuICAgICAqIEBwYXJhbSAkdG9nZ2xlQnRuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdE5hdigkbmF2LCAkdG9nZ2xlQnRuKSB7XG5cbiAgICAgICR0b2dnbGVCdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAkbmF2LnNsaWRlVG9nZ2xlKCk7XG5cbiAgICAgIH0pO1xuXG4gICAgICAgIHZhciAkY2xvc2VCdG4gPSAkbmF2LmZpbmQoJy5uYXZfY2xvc2UnKTtcblxuICAgICAgICRjbG9zZUJ0bi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICRuYXYuc2xpZGVUb2dnbGUoKTtcbiAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICRuYXZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzbGlkZU5hdigkbmF2KSB7XG4gICAgICAgICRuYXYuc2xpZGVUb2dnbGUoKTtcbiAgICB9XG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDA0LjA0LjIwMTcuXG4gKi9cbihmdW5jdGlvbiggJCApIHtcblxuXG4gICAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGluaXRQcmVsb2FkZXIoKTtcbiAgICB9KTtcblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdFByZWxvYWRlcigpIHtcbiAgICAgICAgdmFyICRwcmVsb2FkZXIgPSAkKCcjcGFnZVByZWxvYWRlcicpLFxuICAgICAgICAgICAgJHNwaW5uZXIgPSAkcHJlbG9hZGVyLmZpbmQoJy5zcGlubmVyJyk7XG5cbiAgICAgICAgJHNwaW5uZXIuZmFkZU91dCgpO1xuICAgICAgICAkcHJlbG9hZGVyLmRlbGF5KDM1MCkuZmFkZU91dCgnc2xvdycpO1xuICAgIH1cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYXN0ZXIgb24gMDIuMDUuMjAxNy5cbiAqL1xuXG4oZnVuY3Rpb24oICQgKSB7XG5cblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBGaWx0ZXIuaW5pdCgpO1xuICAgIH0pO1xuXG5cbiAgICB2YXIgRmlsdGVyID0ge307XG5cbiAgICBGaWx0ZXIubm9taW5hdGlvbktleSA9ICdub21pbmF0aW9uJztcbiAgICBGaWx0ZXIuZGF0YUF0dHIgPSAnZGF0YS1maWx0ZXInO1xuICAgIEZpbHRlci5idXR0b25zTm9taW5hdGlvbkNsYXNzID0gJ25vbWluYXRpb25fZmlsdGVyX2J1dHRvbic7XG4gICAgRmlsdGVyLmdhbGxlcnlJdGVtQ2xhc3MgPSAnZmlsdGVyYWJsZSc7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEZpbHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdGhpcy5pbml0QnV0dG9uKCQoJy4nICsgdGhpcy5idXR0b25zTm9taW5hdGlvbkNsYXNzKSk7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJ1dHRvbnNcbiAgICAgKi9cbiAgICBGaWx0ZXIuaW5pdEJ1dHRvbiA9IGZ1bmN0aW9uKGJ1dHRvbnMpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGJ1dHRvbnMuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgZmlsdGVyID0gJCh0aGlzKS5hdHRyKHNlbGYuZGF0YUF0dHIpO1xuXG4gICAgICAgICAgZWxlbWVudExpc3QgPSAkKCcuJyArIHNlbGYuZ2FsbGVyeUl0ZW1DbGFzcyk7XG4gICAgICAgICAgc2VsZi5maWx0ZXJDb250ZW50KGZpbHRlciwgZWxlbWVudExpc3QsIHNlbGYubm9taW5hdGlvbktleSk7XG5cbiAgICAgIH0pO1xuXG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGV4cFxuICAgICAqIEBwYXJhbSBlbGVtZW50TGlzdFxuICAgICAqIEBwYXJhbSBhdHRyVmFsXG4gICAgICovXG4gICAgRmlsdGVyLmZpbHRlckNvbnRlbnQgPSBmdW5jdGlvbihleHAsIGVsZW1lbnRMaXN0LCBhdHRyVmFsKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgZXhwID0gZXhwLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgZWxlbWVudExpc3QuZWFjaChmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNob3coKTtcbiAgICAgICAgICAgIGVsZW1BdHRyID0gJCh0aGlzKS5hdHRyKCdkYXRhLScgKyBhdHRyVmFsKTtcbiAgICAgICAgICAgIGVsZW1BdHRyID0gZWxlbUF0dHIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChlbGVtQXR0ciAhPSBleHApIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ2ZpbHRlciBpcyBkb25lOiAnICsgZXhwKTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZWxlbWVudExpc3RcbiAgICAgKi9cbiAgICBGaWx0ZXIucmVtb3ZlRmlsdGVyID0gZnVuY3Rpb24oZWxlbWVudExpc3QpIHtcbiAgICAgICAgXG4gICAgICAgIGVsZW1lbnRMaXN0LmVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICBcbiAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG4gICAgXG5cblxuXG5cblxuXG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCAkICkge1xuXG4gICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICB2YXIgJGJvZHkgPSAkKCdib2R5Jyk7XG4gICAgICAgdmFyICR0b3BMaW5rID0gJCgnLnRvcF9saW5rJyk7XG5cbiAgICAgICAkdG9wTGluay5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICRib2R5LmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sIDgwMCk7XG5cbiAgICAgICB9KTtcblxuXG4gICAgICAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIGluaXRUb3BMaW5rKCk7XG4gICAgICAgfTtcblxuXG4gICAgICAgLyoqXG4gICAgICAgICogXG4gICAgICAgICovXG4gICAgICAgZnVuY3Rpb24gaW5pdFRvcExpbmsoKSB7XG4gICAgICAgICAgIGlmICgkYm9keS5zY3JvbGxUb3AoKSA+IDQwMCkge1xuICAgICAgICAgICAgICAgJHRvcExpbmsuc2hvdygnZmFzdCcpO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgJHRvcExpbmsuaGlkZSgnZmFzdCcpO1xuICAgICAgICAgICB9XG4gICAgICAgfVxuXG5cbiAgIH0pO1xuXG5cblxufSkoalF1ZXJ5KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgcm9vdCBvbiAyOS4wNS4xNy5cbiAqL1xuXG4oZnVuY3Rpb24oJCkge1xuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICB2YXIgc29ydEZpZWxkID0gJCgnLnNvcnRfZmllbGQnKTtcbiAgICAgIHZhciBnYWxsZXJ5TGlzdCA9ICQoJy5nYWxsZXJ5X2xpc3QnKTtcbiAgICAgIHNvcnRGaWVsZC5jbGljayhmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdmFyIHNvcnRUeXBlID0gJCh0aGlzKS5hdHRyKCdkYXRhLXNvcnQnKTtcbiAgICAgICAgICB2YXIgdGVybXMgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtdGVybXMnKTtcbiAgICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAnYWN0aW9uJzogJ215ZmlsdGVyJyxcbiAgICAgICAgICAgICAgJ3NvcnRfdHlwZSc6IHNvcnRUeXBlLFxuICAgICAgICAgICAgICAndGVybXMnOiB0ZXJtc1xuICAgICAgICAgIH07XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgdXJsOiB3aW5kb3cud3BfZGF0YS5hamF4X3VybCxcbiAgICAgICAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgICAgICAgIGdhbGxlcnlMaXN0LmZpbmQoJy5zb3J0X3ByZWxvYWRlcicpLnNob3coKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGdhbGxlcnlMaXN0LmZpbmQoJy5zb3J0X3ByZWxvYWRlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgIGdhbGxlcnlMaXN0Lmh0bWwoZGF0YSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuXG4gICAgICB9KTtcblxuICB9KVxuXG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDMwLjAzLjIwMTcuXG4gKi9cblxuKGZ1bmN0aW9uKCAkICkge1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nKS50b29sdGlwKCk7XG4gICAgfSk7XG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFzdGVyIG9uIDE2LjA1LjIwMTcuXG4gKi9cbihmdW5jdGlvbiggJCApIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciAkZm9ybSA9ICQoJyN1cGRhdGVVc2VySW5mbycpO1xuXG4gICAgICAgICRmb3JtLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIHVzZXJJZCA9ICQoJyN1c2VySWQnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciB1c2VyVXJsID0gJCgnI3VzZXJVcmwnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciB1c2VyTmFtZSA9ICQoJyN1c2VyTmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGZvcm1BY3Rpb24gPSAkKCcjZm9ybUFjdGlvbicpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRMYW5nID0gJCgnI2N1cnJlbnRMYW5nJykudmFsKCk7XG5cbiAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1BY3Rpb24sXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgICAgICAgIHVzZXJfdXJsOiB1c2VyVXJsLFxuICAgICAgICAgICAgICAgIHVzZXJfbmFtZTogdXNlck5hbWUsXG4gICAgICAgICAgICAgICAgY3VycmVudF9sYW5nOiBjdXJyZW50TGFuZ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJC5wb3N0KGFqYXhfdmFyLCBmb3JtRGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHVzZXJNZXNzYWdlID0gJCgnI3VzZXJNZXNzYWdlcycpO1xuXG4gICAgICAgICAgICAgICAgJHVzZXJNZXNzYWdlLnRleHQocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICR1c2VyTWVzc2FnZS5zbGlkZVRvZ2dsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG5cblxuXG5cblxuXG5cblxuICAgIH0pO1xuXG5cblxuXG5cblxuXG59KShqUXVlcnkpOyJdfQ==
